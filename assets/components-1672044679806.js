import{b as Rl,P as mt,a as Nt,u as Hl,N as $t,c as pt,D as Wl,e as tl,Q as We,d as Qe,f as gl,g as vt,h as ht,i as qt,j as Ft,k as zt,l as ie,m as Ve,n as yl,o as bt,p as Kl,q as bl,r as Ct,s as Gl,t as Yl,v as Zl,w as be,x as Xl,y as Vt,z as Jl,A as Tt,B as ot,C as it,E as Je,F as _l,G as Me,H as et,I as kl,J as at,K as Et,L as Qt,M as st,O as xl,R as en,S as tn,T as ln,U as nn,V as an,W as rn,X as on,Y as Sl,Z as ll,_ as nl,$ as Oe,a0 as ut,a1 as sn,a2 as un,a3 as al,a4 as At,a5 as Dt,a6 as dn,a7 as cn,a8 as fn,a9 as wl,aa as $l,ab as mn}from"./quasar-1672044679806.js";import{r as j,o as Ke,n as ve,a as p,c as A,b as Y,d as y,w as d,i as xe,e as h,f as Ge,g as me,F as ae,h as U,u,j as X,t as z,k as De,l as Cl,m as se,p as fe,q as pn,s as _e,v as Se,x as He,y as re,z as Z,A as ke,B as Ae,C as pe,D as J,E as vn,G as Vl,H as Fe,I as hn,J as we,K as Rt,T as gn,L as Ht,M as yn,N as ge,O as bn,P as _t}from"./@vue-1672044679806.js";import{c as _n,d as kn,l as rl,p as ol}from"./package-1672044679806.js";import{a as Wt}from"./axios-1672044679806.js";import{u as xn,i as Sn,a as wn,b as $n,c as Cn,d as Vn,e as Tn,f as jn,g as Nn,h as qn,j as Bn,k as Ln,l as On,m as Fn,n as En}from"./echarts-1672044679806.js";import{L as il}from"./zrender-1672044679806.js";const Pn=function(){const l=document.createElement("link").relList;return l&&l.supports&&l.supports("modulepreload")?"modulepreload":"preload"}(),sl={},Mn="",Ce=function(l,t){return!t||t.length===0?l():Promise.all(t.map(n=>{if(n=`${Mn}${n}`,n in sl)return;sl[n]=!0;const o=n.endsWith(".css"),i=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${i}`))return;const a=document.createElement("link");if(a.rel=o?"stylesheet":Pn,o||(a.as="script",a.crossOrigin=""),a.href=n,document.head.appendChild(a),o)return new Promise((s,v)=>{a.addEventListener("load",s),a.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>l())};var In={Account:"\u8D26\u53F7",AccountTip1:"\u8D26\u53F7/\u624B\u673A\u53F7/\u90AE\u7BB1",Add:"\u6DFB\u52A0",After:"\u540E",All:"\u6240\u6709",ASC:"\u5347\u5E8F",BuiltIn:"\u7CFB\u7EDF\u5185\u7F6E",Cancel:"\u53D6\u6D88",Category:"\u7C7B\u522B",CheckAll:"\u5168\u9009",Close:"\u5173\u95ED",Classify:"\u5206\u7C7B",Column:"\u5217",CompactLayout:"\u7D27\u51D1\u5E03\u5C40",Config:"\u914D\u7F6E",Confirm:"\u786E\u5B9A",Create:"\u521B\u5EFA",CurrentLogon:"\u5F53\u524D\u767B\u5F55\u4EBA",DarkMode:"\u6697\u9ED1\u6A21\u5F0F",DecimalDigits:"\u4EC5\u652F\u6301{0}\u4F4D\u5C0F\u6570",Del:"\u5220\u9664",DelTips:"\u786E\u5B9A\u5220\u9664\u5BF9\u5E94\u6570\u636E\u5417\uFF1F",DESC:"\u964D\u5E8F",Disable:"\u7981\u7528",Distribution:"\u5206\u914D",Draft:"\u8349\u7A3F",Edit:"\u7F16\u8F91",Email:"\u90AE\u7BB1",Empty:"\u6E05\u7A7A",Enable:"\u542F\u7528",Execute:"\u6267\u884C",Exit:"\u9000\u51FA",ExitFullScreen:"\u9000\u51FA\u5168\u5C4F",ExitTip:"\u786E\u5B9A\u9000\u51FA\u7CFB\u7EDF\uFF1F",ExportList:"\u5BFC\u51FA\u5217\u8868",Fail:"\u5931\u8D25",File:"\u6587\u4EF6",FileTips:"\u6587\u4EF6\u987B\u5C0F\u4E8E {0} MB",FilterKeywords:"\u8F93\u5165\u5173\u952E\u5B57\u8FC7\u6EE4",Forget:"\u5FD8\u8BB0",FullScreen:"\u5168\u5C4F",Grid:"\u7F51\u683C",GoBack:"\u8FD4\u56DE\u4E0A\u4E00\u9875",Have:"\u6709",Hint:"\u63D0\u793A",HOME:"\u4E3B\u9875",Import:"\u5BFC\u5165",ImportError:"\u672A\u77E5\u9519\u8BEF\uFF0C\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458",ImportNonFiles:"\u672A\u68C0\u6D4B\u5230\u5BFC\u5165\u6587\u4EF6\uFF0C\u8BF7\u68C0\u67E5",ImportTips:"\u4EC5\u652F\u6301.XLS\u3001.XLSX\u6587\u4EF6",ImportTemplate:"\u5BFC\u5165\u6A21\u677F",ItemPage:"\u6761/\u9875",Keywords:"\u5173\u952E\u5B57",Language:"\u8BED\u8A00",LeftSide:"\u5DE6\u4FA7",List:"\u5217\u8868",Login:"\u767B\u5F55",Mobile:"\u624B\u673A\u53F7",More:"\u66F4\u591A",Name:"\u540D\u79F0",Name1:"\u59D3\u540D",NameENUS:"\u82F1\u6587\u540D",No:"\u7F16\u53F7",No1:"\u5426",NoData:"\u6CA1\u6709\u53EF\u7528\u6570\u636E",NoExportData:"\u6682\u65E0\u53EF\u5BFC\u51FA\u6570\u636E",Nothing:"\u65E0",NotGreater:"\u4E0D\u5F97\u5927\u4E8E {0}",NotLess:"\u4E0D\u5F97\u5C0F\u4E8E {0}",Number:"\u6570",Operation:"\u64CD\u4F5C",Operator:"\u64CD\u4F5C\u4EBA",Order:"\u987A\u5E8F",Origin:"\u6765\u6E90",Other:"\u5176\u5B83",Password:"\u5BC6\u7801",PleaseInput:"\u8BF7\u8F93\u5165 ",PleaseSelect:"\u8BF7\u9009\u62E9 ",Picture:"\u56FE\u7247",PictureTips:"\u4EC5\u652F\u6301\u5C0F\u4E8E {0} MB\u7684\u56FE\u7247",Preview:"\u9884\u89C8",Refresh:"\u5237\u65B0",Reload:"\u91CD\u65B0\u52A0\u8F7D",Remarks:"\u5907\u6CE8",RememberMe:"\u8BB0\u4F4F\u6211",Reset:"\u91CD\u7F6E",Restore:"\u8FD8\u539F",Result:"\u7ED3\u679C",RightSide:"\u53F3\u4FA7",Save:"\u4FDD\u5B58",Scrap:"\u62A5\u5E9F",Search:"\u641C\u7D22",SelectedTip:"\u5DF2\u9009\u62E9\u6570\u636E\u4E2D\u6709\u4E0D\u53EF\u7528\u6570\u636E\uFF0C\u8BF7\u68C0\u67E5\uFF01",SelectedTips:"\u5DF2\u9009\u62E9 {0} \u6761\u6570\u636E",ServiceList:"\u670D\u52A1\u5217\u8868",Setting:"\u8BBE\u7F6E",ShowHide:"\u663E\u9690",Size:"\u5927\u5C0F",Sorting:"\u6392\u5E8F",Start:"\u5F00\u59CB",Status:"\u72B6\u6001",Submit:"\u63D0\u4EA4",Success:"\u6210\u529F",Superior:"\u4E0A\u7EA7",System:"\u7CFB\u7EDF",Style:"\u98CE\u683C",Template:"\u6A21\u677F",TemplateDownload:"\u6A21\u677F\u4E0B\u8F7D",Tenant:"\u79DF\u6237",Thumbnail:"\u7F29\u7565\u56FE",Time:"\u65F6\u95F4",Title:"\u6807\u9898",Totals:"\u603B\u6761\u6570",ToView:"\u67E5\u770B",Type:"\u7C7B\u578B",Upload:"\u4E0A\u4F20",UploadFailed:"\u4E0A\u4F20\u5931\u8D25\uFF0C\u8BF7\u70B9\u51FB\u91CD\u8BD5",VerifyTip1:"\u672A\u901A\u8FC7\u6821\u9A8C",WelcomeBack:"\u6B22\u8FCE\u56DE\u6765",Whether:"\u662F\u5426",WithOut:"\u65E0",Yes:"\u662F",M1:"\u4E00\u6708",M2:"\u4E8C\u6708",M3:"\u4E09\u6708",M4:"\u56DB\u6708",M5:"\u4E94\u6708",M6:"\u516D\u6708",M7:"\u4E03\u6708",M8:"\u516B\u6708",M9:"\u4E5D\u6708",M10:"\u5341\u6708",M11:"\u5341\u4E00\u6708",M12:"\u5341\u4E8C\u6708",W1:"\u5468\u4E00",W2:"\u5468\u4E8C",W3:"\u5468\u4E09",W4:"\u5468\u56DB",W5:"\u5468\u4E94",W6:"\u5468\u516D",W7:"\u5468\u65E5"},Un=Object.freeze(Object.defineProperty({__proto__:null,default:In},Symbol.toStringTag,{value:"Module"})),zn={Account:"Account",ImportTips:"Only .XLS and .XLSX files are supported"},Qn=Object.freeze(Object.defineProperty({__proto__:null,default:zn},Symbol.toStringTag,{value:"Module"}));const ul={"./ENUS.js":Qn};let Pt={};Object.keys(ul).forEach(e=>{const l=ul[e];Pt={...Pt,...l.default||l}});const dl={"./ZHCN.js":Un};let Mt={};Object.keys(dl).forEach(e=>{const l=dl[e];Mt={...Mt,...l.default||l}});var An={EN_US:Pt,ZH_CN:Mt};let It=(navigator.language||navigator.browserLanguage||"").toUpperCase();It=It.includes("ZH")?"ZH_CN":"EN_US";const Tl=_n({locale:It,messages:An});var Dn=Rl(({app:e})=>{e.use(Tl)});const ee=Tl.global;var fo=Object.freeze(Object.defineProperty({__proto__:null,default:Dn,i18n:ee},Symbol.toStringTag,{value:"Module"}));let Ue=`${window.IPConfig.SERVICE_CONTEXT_PATH}`;Ue=Ue.endsWith("/")?Ue:Ue+"/";const qe={children:"childs",level:"level",menuEnUs:"menuNameEnUs",menuZhCn:"menuNameZhCn",menuIcon:"menuIcon",menuId:"id",parentIds:"parentIds",path:"menuUrl",serviceId:"serviceId"},dt=(e,l,t)=>gt({method:e,url:l,data:t});function Bt(e,l,t,n=void 0){dt("get",e,l).then(o=>{o?t&&t(o):n&&n(o)}).catch(o=>{n&&n(o)})}function Ye(e,l,t,n=void 0){dt("post",e,l).then(o=>{o?t&&t(o):n&&n(o)}).catch(o=>{n&&n(o)})}const Kt=(e=!0)=>[{path:"/dashboard",component:e?"":()=>Ce(()=>import("./MainLayout-1672044679806.js"),["assets/MainLayout-1672044679806.js","assets/MainLayout-1672044679806.css","assets/@quasar-1672044679806.css","assets/quasar-1672044679806.js","assets/quasar-1672044679806.css","assets/@vue-1672044679806.js","assets/vue-router-1672044679806.js","assets/index-1672044679806.js","assets/index-1672044679806.css","assets/package-1672044679806.js","assets/package-1672044679806.css","assets/@intlify-1672044679806.js","assets/axios-1672044679806.js","assets/echarts-1672044679806.js","assets/zrender-1672044679806.js"]),meta:{menuZhCn:"\u89C4\u8303\u53CA\u6837\u5F0F",menuEnUs:"Dashboard",menuId:"Dashboard",menuIcon:"dashboard"},children:[{path:"/dashboard/console",component:e?"":()=>Ce(()=>import("./Console-1672044679806.js"),["assets/Console-1672044679806.js","assets/quasar-1672044679806.js","assets/quasar-1672044679806.css","assets/@vue-1672044679806.js"]),meta:{menuZhCn:"\u89C4\u8303\u8981\u6C42",menuEnUs:"Console",menuId:"Console",parentIds:"Dashboard",menuIcon:"home"}},{path:"/dashboard/worktable",component:e?"":()=>Ce(()=>import("./Worktable-1672044679806.js"),["assets/Worktable-1672044679806.js","assets/quasar-1672044679806.js","assets/quasar-1672044679806.css","assets/@vue-1672044679806.js","assets/package-1672044679806.js","assets/package-1672044679806.css","assets/@intlify-1672044679806.js","assets/axios-1672044679806.js","assets/echarts-1672044679806.js","assets/zrender-1672044679806.js"]),meta:{menuZhCn:"\u5168\u5C40\u6837\u5F0F",menuEnUs:"Worktable",menuId:"Worktable",parentIds:"Dashboard",menuIcon:"workspaces"}}]},{path:"/components",component:e?"":()=>Ce(()=>import("./MainLayout-1672044679806.js"),["assets/MainLayout-1672044679806.js","assets/MainLayout-1672044679806.css","assets/@quasar-1672044679806.css","assets/quasar-1672044679806.js","assets/quasar-1672044679806.css","assets/@vue-1672044679806.js","assets/vue-router-1672044679806.js","assets/index-1672044679806.js","assets/index-1672044679806.css","assets/package-1672044679806.js","assets/package-1672044679806.css","assets/@intlify-1672044679806.js","assets/axios-1672044679806.js","assets/echarts-1672044679806.js","assets/zrender-1672044679806.js"]),meta:{menuZhCn:"\u4E8C\u6B21\u5C01\u88C5",menuEnUs:"Packaging",menuId:"Packaging",menuIcon:""},children:[{path:"/components/QxForm",component:e?"":()=>Ce(()=>import("./views-1672044679806.js").then(function(l){return l.Q}),["assets/views-1672044679806.js","assets/quasar-1672044679806.js","assets/quasar-1672044679806.css","assets/@vue-1672044679806.js"]),meta:{menuZhCn:"QxForm",menuEnUs:"QxForm",menuId:"Form",parentIds:"Packaging",menuIcon:""}},{path:"/components/QxTable",component:e?"":()=>Ce(()=>import("./views-1672044679806.js").then(function(l){return l.c}),["assets/views-1672044679806.js","assets/quasar-1672044679806.js","assets/quasar-1672044679806.css","assets/@vue-1672044679806.js"]),meta:{menuZhCn:"QxTable",menuEnUs:"QxTable",menuId:"QxTable",parentIds:"Packaging",menuIcon:""}},{path:"/components/ExportOrImport",component:e?"":()=>Ce(()=>import("./views-1672044679806.js").then(function(l){return l.E}),["assets/views-1672044679806.js","assets/quasar-1672044679806.js","assets/quasar-1672044679806.css","assets/@vue-1672044679806.js"]),meta:{menuZhCn:"ExportOrImport",menuEnUs:"ExportOrImport",menuId:"ExportOrImport",parentIds:"Packaging",menuIcon:""}},{path:"/components/ModalOrPage",component:e?"":()=>Ce(()=>import("./views-1672044679806.js").then(function(l){return l.M}),["assets/views-1672044679806.js","assets/quasar-1672044679806.js","assets/quasar-1672044679806.css","assets/@vue-1672044679806.js"]),meta:{menuZhCn:"ModalOrPage",menuEnUs:"ModalOrPage",menuId:"ModalOrPage",parentIds:"Packaging",menuIcon:""}},{path:"/components/PictureOrFile",component:e?"":()=>Ce(()=>import("./views-1672044679806.js").then(function(l){return l.P}),["assets/views-1672044679806.js","assets/quasar-1672044679806.js","assets/quasar-1672044679806.css","assets/@vue-1672044679806.js"]),meta:{menuZhCn:"PictureOrFile",menuEnUs:"PictureOrFile",menuId:"PictureOrFile",parentIds:"Packaging",menuIcon:""}},{path:"/components/QCharts",component:e?"":()=>Ce(()=>import("./views-1672044679806.js").then(function(l){return l.d}),["assets/views-1672044679806.js","assets/quasar-1672044679806.js","assets/quasar-1672044679806.css","assets/@vue-1672044679806.js"]),meta:{menuZhCn:"QCharts",menuEnUs:"QCharts",menuId:"QCharts",parentIds:"Packaging",menuIcon:""}}]}],mo=[{path:"/",component:()=>Ce(()=>import("./MainLayout-1672044679806.js"),["assets/MainLayout-1672044679806.js","assets/MainLayout-1672044679806.css","assets/@quasar-1672044679806.css","assets/quasar-1672044679806.js","assets/quasar-1672044679806.css","assets/@vue-1672044679806.js","assets/vue-router-1672044679806.js","assets/index-1672044679806.js","assets/index-1672044679806.css","assets/package-1672044679806.js","assets/package-1672044679806.css","assets/@intlify-1672044679806.js","assets/axios-1672044679806.js","assets/echarts-1672044679806.js","assets/zrender-1672044679806.js"]),children:[{path:"",redirect:"/dashboard/console"}]},...Kt(!1),{path:"/:catchAll(.*)*",component:()=>Ce(()=>import("./ErrorNotFound-1672044679806.js"),["assets/ErrorNotFound-1672044679806.js","assets/quasar-1672044679806.js","assets/quasar-1672044679806.css","assets/@vue-1672044679806.js","assets/package-1672044679806.js","assets/package-1672044679806.css","assets/@intlify-1672044679806.js","assets/axios-1672044679806.js","assets/echarts-1672044679806.js","assets/zrender-1672044679806.js"])}],lt=e=>{const l=Nt.getItem("userName");return l?`${l}-${e}`:e},Re=(e,l,t="")=>{["L","l"].includes(t)?mt.set(lt(String(e)),l):Nt.set(lt(String(e)),l)},Pe=(e,l="")=>{var t;return["L","l"].includes(l)?(t=mt.getItem(lt(String(e))))!=null?t:mt.getItem(String(e)):Nt.getItem(lt(String(e)))},po=(e,l="")=>{if(["L","l"].includes(l)){mt.remove(String(e)),mt.remove(lt(String(e)));return}Nt.remove(lt(String(e)))},Rn=["/authMenu","/authRole","/cfgDict","/memberOrg","/memberPost","/memberUser","/operLog"],jl=(e=[],l=[],t=Kt(),n="")=>{for(const o of e){const i={meta:{menuId:o[qe.menuId]||Hl(),menuIcon:o[qe.menuIcon],menuZhCn:o[qe.menuZhCn],menuEnUs:o[qe.menuEnUs],serviceId:o[qe.serviceId],parentIds:o[qe.parentIds]||n},children:void 0,component:void 0,path:o[qe.path].startsWith("/")?o[qe.path]:"/"+o[qe.path]};Rn.includes(i.path)&&(i.path=`/SystemCtr${i.path}`);const a=o[qe.children];a&&a.length?(i.children=[],t.push(i),jl(a,l,i.children,i.meta.menuId)):(l.push(i),t.push(i))}return{LMenus:l,TMenus:t}},kt=kn("userStores",{state:()=>({breadcrumbs:Pe("breadcrumbs")||{},btns:Pe("btns")||[],listMenus:Pe("listMenus")||[],OSSPath:Pe("OSSPath")||"",serviceList:Pe("serviceList")||[],serviceMenu:{},token:Pe("Token","L")||"",treeMenus:Kt(),userInfo:Pe("userInfo")||{}}),getters:{},actions:{SET_USERINFO(e){this.userInfo=e,Re("userInfo",e)},SET_SERVICELIST(e){this.serviceList=e,Re("serviceList",e)},SET_BREADCRUMBS(e){this.breadcrumbs=e,Re("breadcrumbs",e)},SET_TOKEN(e){this.token=e,Re("Token",e,"L")},async LoginByName(e={}){return new Promise((l,t)=>{e.containServiceList=!0,dt("post","/auth/api/login",e).then(n=>{Re("userName",n.userVO.loginName),this.SET_TOKEN(n.authToken),this.SET_USERINFO(n.userVO),this.SET_SERVICELIST(n.serviceList),K(this.breadcrumbs)&&this.SET_BREADCRUMBS(n.serviceList[0]||{}),l(n.userVO)}).catch(n=>{t(n)})})},async GetBtns(){return new Promise((e,l)=>{const{id:t}=this.breadcrumbs||{},n=this.serviceMenu[t];if(n&&n.btns){e(n.btns);return}dt("get","/auth/api/currentUserPermissions",{serviceId:t}).then(o=>{this.btns=[...new Set([...this.btns,...o])],Re("btns",this.btns),n?n.btns=o:this.serviceMenu[t]={btns:o},e(o)}).catch(o=>{l(o)})})},async GetMenus(){return await this.GetBtns(),new Promise((e,l)=>{const{id:t}=this.breadcrumbs||{},n=this.serviceMenu[t];if(n&&n.menu){this.treeMenus=n.menu.TMenus,e({TMenus:n.menu.TMenus,LMenus:[]});return}dt("get","/auth/api/currentUserTreeMenus",{serviceId:t}).then(o=>{const i=jl(o);this.listMenus=Xn([...this.listMenus,...i.LMenus],"path"),Re("listMenus",this.listMenus),this.treeMenus=i.TMenus,n?n.menu=i:this.serviceMenu[t]={menu:i},e(i)}).catch(o=>{l(o)})})}}}),Hn=e=>{const l=[];return Object.keys(e).forEach(t=>{l.push(`${t}=${e[t]}`)}),l.join("&")},Nl=e=>{e&&e.data&&Wn(e.data)&&(e.data=JSON.parse(e.data));const{method:l,url:t,params:n,data:o}=e;return[l,t,rl.stringify(n),rl.stringify(o)].join("&")},Wn=e=>{if(typeof e=="string")try{const l=JSON.parse(e);return!!(typeof l=="object"&&l)}catch{return!1}},rt=e=>{$t.create({type:"negative",message:e.message||e.error||e})};let Gt=!1;const Kn=e=>{Gt=e},ql=()=>{jt=!1,Gt=!0,Promise.resolve().then(()=>{tt.forEach(e=>e(Ll)),tt=[]}),ze=0},Ut=e=>{const{userInfo:l,LoginByName:t}=kt();Yt({msg:e.message||e,okLabel:ee.t("Login"),cancelLabel:ee.t("Close"),prompt:{model:"",outlined:!0,placeholder:ee.t("Password"),isValid:n=>n.length>0,type:"password"}},n=>{const o={loginName:l.loginName,tenantId:l.tenantId,password:n};t(o).then(()=>{}).catch(()=>{}),jt=!0,ze=0},()=>ql())};let ze=0,tt=[],jt=!1;const cl=e=>(ze===0&&(ze=1,Ut(e.data)),new Promise(l=>tt.push(t=>l(t(e.config))))),Gn=e=>[200,201,500].includes(e.status)?e.data.code?je[e.data.code||"default"](e.data):e.status===500?je.default(e.data):je.blob(e):je[e.status||"default"](e.data),Bl=["118","119","401"],Yn=(e,l)=>(jt&&tt.length&&(jt=!1,e.status===200&&e.data.code!=="-1"?Promise.resolve().then(()=>{tt.forEach(t=>t(l)),tt=[]}):ql()),e.status===401||e.data&&e.data.code==="-1"&&e.data.data&&Bl.includes(e.data.data.bussinessCode)?cl(e):Gn(e)),je={"-1":e=>e.data&&Bl.includes(e.data.bussinessCode)?(ze===0&&(ze=1,Ut(e)),Promise.reject(e.message)):(rt(e),Promise.reject(e.message)),0:e=>e.data||!0,200:e=>e.data||!0,201:e=>e.data||!0,401:e=>(ze===0&&(ze=1,Ut(e)),Promise.reject(e.message)),404:e=>(rt("404"),Promise.reject(e)),500:e=>{rt(e)},503:e=>(rt(ee.t("AxiosTip")),Promise.reject(e)),blob:e=>e,default:e=>(rt(e),Promise.reject(e))},ct=new Map;function Zn(e){const l=Nl(e);ct.has(l)||(e.cancelToken=e.cancelToken||new Wt.CancelToken(t=>{ct.set(l,t)}))}function Ll(e){const l=Nl(e);ct.has(l)&&(ct.get(l)(l),ct.delete(l))}const gt=Wt.create({baseURL:Ue,timeout:5e4,validateStatus:e=>e>=200&&e<=500});gt.interceptors.request.use(e=>{pt.start();const l=Pe("Token","L")||"";return e.headers={lang:ee.locale,Authorization:l,"Content-Type":"application/json;charset=UTF-8"},["post","put"].includes(e.method.toLocaleLowerCase())&&e.headers.serialize?e.data=Hn(e.data):["get"].includes(e.method.toLocaleLowerCase())&&(e.params=e.params||e.data),Zn(e),Gt&&(Ll(e),Kn(!1)),e},e=>Promise.reject(e));gt.interceptors.response.use(e=>(pt.stop(),e.status===201&&kt().SET_TOKEN(e.headers.authorization),Yn(e,gt)),e=>{if(pt.stop(),Wt.isCancel(e))return Promise.reject(e);if(e.message){const l=e.message.split(" status code ")[1];return je[l||"default"](e)}return Promise.reject(e)});function ne(e){const l={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object"};return e instanceof Element?"element":l[toString.call(e)]}function Te(e){const l=ne(e);return l==="array"?tl(!0,[],e):l==="object"?tl(!0,{},e):e}function K(e,l){if(["boolean","number"].includes(typeof e))return!1;if(["undefined","null"].includes(ne(e))||ne(e)==="string"&&e==="")return!0;if(e instanceof Array){if(e.length===0)return!0;if(l){for(const t of e)if(!K(t,l))return!1;return!0}}else if(e instanceof Object)return l?Object.values(e).filter(n=>n).length===0:!Object.keys(e).length;return!1}function vo(e="",l,t){return ee.locale==="ZH_CN"?e=l||e.substring(0,e.length-4)+"ZhCn":ee.locale==="EN_US"&&(e=t||e.substring(0,e.length-4)+"EnUs"),e}function Xn(e,l="id",t){const n=new Map;return t&&(e=Te(e)),e.reverse(),e=e.filter(o=>!n.has(o[l])&&n.set(o[l],1)),e.reverse()}function Yt({title:e,msg:l="",okLabel:t,cancelLabel:n,prompt:o},i=void 0,a=void 0){Wl.create({title:e||ee.t("Hint"),message:l,ok:{color:"#FFF",label:t||ee.t("Confirm"),textColor:"primary"},cancel:{color:"#FFF",label:n||ee.t("Cancel"),textColor:"negative"},prompt:o,persistent:!0}).onOk(s=>i&&i(s)).onCancel(()=>a&&a())}function yt(e){const l={method:e.dicMethod||"post",url:e.dicUrl,data:e.dicQuery||{},responseType:"blob"};gt(l).then(t=>{const n=document.createElement("a"),o=new Blob([t.data],{type:e.type||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),i=/filename=([^;]+\.[^\\.;]+);*/,a=decodeURI(t.headers["content-disposition"]),s=i.exec(a)||[];let v=e.fileName||s[1]||"\u672A\u547D\u540D";v=v.replace(/"/g,""),n.href=URL.createObjectURL(o),n.setAttribute("download",v),document.body.appendChild(n),n.click(),document.body.appendChild(n),typeof e.done=="function"&&e.done()}).catch(()=>{typeof e.done=="function"&&e.done()})}var Ol=(e,l)=>{const t=e.__vccOpts||e;for(const[n,o]of l)t[n]=o;return t};const Jn={class:"fit overflow-hidden-y"},ea=["src"],ta={__name:"QFrame",props:{srcPath:String},setup(e){const l=j(!1);return Ke(()=>ve(()=>l.value=!0)),(t,n)=>(p(),A("div",Jn,[l.value?(p(),A("iframe",{key:0,src:e.srcPath,class:"fit no-border"},null,8,ea)):Y("",!0),y(Qe,{showing:!l.value},{default:d(()=>[y(We,{color:"primary",size:"50px"})]),_:1},8,["showing"])]))}};var la=Object.freeze(Object.defineProperty({__proto__:null,default:ta},Symbol.toStringTag,{value:"Module"}));const na={__name:"QJsonTree",props:{jsonData:Object,insetLevel:Number,defaultOpen:Boolean},setup(e){const l=e,t=xe("isDense",!0),n=h(()=>Object.keys(l.jsonData||{})),o=h(()=>i=>typeof i=="string"?`"${i}"`:i);return(i,a)=>{const s=Ge("QJsonTree",!0);return p(!0),A(ae,null,me(u(n),v=>(p(),A(ae,{key:v},[e.jsonData[v]&&typeof e.jsonData[v]=="object"?(p(),U(gl,{key:0,"default-opened":e.defaultOpen,dense:u(t),"header-inset-level":e.insetLevel,label:v,"switch-toggle-side":""},{default:d(()=>[y(s,{"inset-level":e.insetLevel+1,"json-data":e.jsonData[v]},null,8,["inset-level","json-data"])]),_:2},1032,["default-opened","dense","header-inset-level","label"])):(p(),U(ht,{key:1,dense:u(t),"inset-level":e.insetLevel},{default:d(()=>[y(vt,null,{default:d(()=>[X(z(v)+":\xA0"+z(u(o)(e.jsonData[v])),1)]),_:2},1024)]),_:2},1032,["dense","inset-level"]))],64))),128)}}};var aa=Object.freeze(Object.defineProperty({__proto__:null,default:na},Symbol.toStringTag,{value:"Module"}));const ra={class:"text-h6 text-weight-medium text-primary"},Zt={__name:"QModal",props:{loading:Boolean,fullScreen:Boolean,modelValue:Boolean,persistent:{type:Boolean,default:!0}},emits:["confirm","update:modelValue","update:loading"],setup(e,{emit:l}){const t=e,n=xe("isDense",!0),o=j(null),i=j(!1),a=j(!1),s=De({"fab-mini":!0,round:!0,flat:!0}),v=h(()=>m.value?{icon:"fullscreen_exit",text:ee.t("ExitFullScreen")}:{icon:"zoom_out_map",text:ee.t("FullScreen")}),C=Cl(),w=h(()=>t.fullScreen||m.value?!1:!C.position),x=h(()=>C.btnAlign||"right"),g=h(()=>!1),b=h(()=>{const{fullWidth:c,fullHeight:_,position:r}=C;return{class:"q-modal",fullWidth:c,fullHeight:_||["left","right"].includes(r),persistent:!0,position:r,maximized:t.fullScreen||m.value}}),$=h(()=>{if(t.fullScreen||m.value)return{};let c="";return C.width&&(c=String(C.width).endsWith("%")?C.width:C.width+"px"),C.position?{width:c||"560px"}:{width:c||"45%"}}),m=j(!1),S=()=>{m.value=!m.value},f=h(()=>{const{position:c}=C;let _=98;return(t.fullScreen||m.value||c)&&(_-=48),(K(C.menuBtn)||C.menuBtn)&&(_+=50),`calc(100vh - ${_}px)`}),T=()=>{t.modelValue!==i.value&&(i.value=t.modelValue),i.value&&g.value&&ve(()=>{var _,r,D;const c=(D=(r=(_=o.value)==null?void 0:_.$el)==null?void 0:r.parentNode)==null?void 0:D.parentNode;c&&(c.onclick=I)})};se(fe(t,"modelValue"),()=>T()),se(fe(t,"loading"),c=>a.value=c,{immediate:!0});const P=c=>{if(c===!1){a.value=!1,l("update:loading",!1);return}a.value=!1,l("update:loading",!1),I()},M=()=>{a.value=!0,l("confirm",P)},I=()=>{const c=C.onBeforeClose||C.beforeClose;c&&typeof c=="function"?c():(i.value=!1,l("update:modelValue",!1))};return(c,_)=>{const r=Ge("qx-btn"),D=pn("drag");return p(),U(bl,Z({modelValue:i.value,"onUpdate:modelValue":_[1]||(_[1]=F=>i.value=F),"no-shake":u(g)},u(b),{onKeyup:_[2]||(_[2]=vn(F=>u(g)&&I(),["esc"]))}),{default:d(()=>[y(qt,{ref_key:"QModal",ref:o,style:_e(u($)),onClick:_[0]||(_[0]=Se(()=>{},["stop"]))},{default:d(()=>[He((p(),U(Ft,{class:"q-modal-header"},{default:d(()=>[re("span",ra,z(u(C).header),1),y(zt),!e.fullScreen&&!u(C).position?(p(),U(ie,Z({key:0,dense:u(n),icon:u(v).icon},s,{onClick:S}),{default:d(()=>[y(Ve,ke(Ae(c.$tooltipAttr)),{default:d(()=>[X(z(u(v).text),1)]),_:1},16)]),_:1},16,["dense","icon"])):Y("",!0),u(C).closeBtn!==!1?(p(),U(ie,Z({key:1,dense:u(n),class:"q-btn-close",icon:"close"},s,{onClick:I}),{default:d(()=>[y(Ve,ke(Ae(c.$tooltipAttr)),{default:d(()=>[X(z(c.$t("Close")),1)]),_:1},16)]),_:1},16,["dense"])):Y("",!0)]),_:1})),[[D,u(w)]]),y(yl,{class:pe([u(C).contentClass,"scroll"]),style:_e({maxHeight:u(f)})},{default:d(()=>[J(c.$slots,"default")]),_:3},8,["class","style"]),y(bt),u(C).menuBtn!==!1?(p(),U(Kl,{key:0,align:u(x),class:"q-modal-footer"},{default:d(()=>[J(c.$slots,"menuLeft"),u(C).submitBtn!==!1?(p(),U(r,{key:0,loading:a.value,icon:"published_with_changes","no-wrap":"",padding:".4em 1em","text-color":"primary",onClick:M},{default:d(()=>[X(z(u(C).submitText||c.$t("Confirm")),1)]),_:1},8,["loading"])):Y("",!0),u(C).closeBtn!==!1?(p(),U(r,{key:1,loading:a.value,icon:"cancel_schedule_send","no-wrap":"",padding:".4em 1em","text-color":"negative",onClick:I},{default:d(()=>[X(z(u(C).closeText||c.$t("Close")),1)]),_:1},8,["loading"])):Y("",!0),J(c.$slots,"menuRight")]),_:3},8,["align"])):Y("",!0),y(Qe,{showing:a.value},{default:d(()=>[y(We,{color:"primary",size:"50px"})]),_:1},8,["showing"])]),_:3},8,["style"])]),_:3},16,["modelValue","no-shake"])}}};var oa=Object.freeze(Object.defineProperty({__proto__:null,default:Zt},Symbol.toStringTag,{value:"Module"}));function ia(e={}){if(e.component)return e.component;const{type:l}=e;return K(l)?Ct:l==="select"?"qx-select":["date","datetime","daterange"].includes(l)?"qx-date":["time"].includes(l)?"qx-time":l==="number"?"q-number":["radio","checkbox","toggle"].includes(l)?"q-group":["year","yearrange"].includes(l)?"q-year":["month","monthrange"].includes(l)?"q-month":l==="tree"?"q-select-tree":l==="icon"?"qx-icon":l==="editor"?"qx-editor":l==="file"?"qx-file":l==="picture"?"q-picture":l==="btnToggle"?Gl:l==="range"?Yl:l==="slider"?Zl:Ct}const sa=/width.*?%;/g;function ua(e={},l,t){const{type:n="input"}=e,o=Te(e);if(["select"].includes(n)&&typeof e.options=="function"&&(o.options=e.options(l)),o.inline=!0,o.outlined=!0,o.lazyRules=e.lazyRules||!0,o.rules=da(e),o.placeholder=Fl(e),l&&(o.rowInfo=l),t&&delete o.maxlength,n==="textarea"&&(o.autogrow=!0),o.maxlength&&(o.counter=!0),o.component||delete o.required,o.style){const a=o.style.split(";").find(s=>s.startsWith("width:"));a&&a.endsWith("%")&&(o.style=o.style.replace(sa,""))}return delete o.component,delete o.formslot,delete o.label,delete o.value,delete o.slot,o}function da(e={}){const l=e.rules||[];return e.required&&l.unshift(t=>!K(t)||`${Fl(e)}`),l}const ca=["input","editor","number","textarea","password","",void 0,null];function Fl(e={}){return e.placeholder?e.placeholder:ca.includes(e.type)?`${ee.t("PleaseInput")}${e.label||""}`:`${ee.t("PleaseSelect")}${e.label||""}`}const fa={key:0,class:"text-red text-weight-bold q-pr-xs"},ma={__name:"FormItem",props:{column:{type:Object,default:()=>({})},dense:{type:Boolean,default:!0},loading:Boolean,readonly:Boolean,isSearch:Boolean,formWidth:Number,modelValue:Object,labelPosition:String,span:[String,Number],labelWidth:[String,Number]},setup(e){const l=e;Vl(m=>({"3b290cb4":`${u(w)}`}));const t=h(()=>{var m;return(m=l.dense)!=null?m:xe("isDense",!0)}),n=h(()=>{if(l.isSearch)return l.span||6;if(!l.formWidth)return l.span||12;if(l.span)return[24,"24"].includes(l.span)&&l.formWidth>2e3?12:l.span;let m=3;return l.formWidth<401?m=24:l.formWidth<801?m=12:l.formWidth<1201?m=8:l.formWidth<1801?m=6:l.formWidth<3601&&(m=4),l.span>m?l.span:m}),o=h(()=>!l.isSearch&&l.formWidth&&l.formWidth/24*n.value<301?!0:l.labelPosition==="top"),i=h(()=>{let m="qx-form-item items-start";return o.value||(m+=" row"),`${m} q-col-${n.value}`}),a=h(()=>{let m="q-pr-sm row items-center text-right";return t.value?m+=" qx-form-item-label-dense":m+=" qx-form-item-label",o.value?m+=" qx-form-item-label-top":l.labelPosition==="left"?m+=" justify-start":m+=" justify-end",m}),s=Object.keys(Fe()),v=h(()=>m=>s.includes(m)),C=h(()=>!["0",0].includes(l.labelWidth)),w=h(()=>o.value||!C.value?"100%":`${l.labelWidth||80}px`),x=h(()=>{const m=ua(l.column,b.value,l.isSearch);return l.readonly&&(delete m.counter,delete m.maxlength),m}),g=h(()=>ia(l.column)),b=j({}),$=(m,S)=>{if(b.value=l.modelValue||{},K(l.column))return;const{field:f}=l.column;if(S&&b.value[f]===S){b.value[f]=m;return}b.value[f]||K(l.column.value)||(b.value[f]=l.column.value)};return se(()=>{var m;return(m=l.column)==null?void 0:m.value},(m,S)=>$(m,S)),se(fe(l,"modelValue"),()=>$(),{immediate:!0}),(m,S)=>(p(),A("div",{class:pe(u(i))},[u(C)?(p(),A("div",{key:0,class:pe([u(a),"form-item-label-width"])},[re("span",{class:pe(u(o)?"ellipsis":"ellipsis-2-lines")},[e.column.required?(p(),A("i",fa,"*")):Y("",!0),X(" "+z(e.column.label),1)],2)],2)):Y("",!0),y(vt,{class:"qx-form-item-card"},{default:d(()=>[e.column.formslot?J(m.$slots,e.column.field,{key:0,attrs:u(x)},void 0,!0):(p(),U(hn(u(g)),Z({key:1,modelValue:b.value[e.column.field],"onUpdate:modelValue":S[0]||(S[0]=f=>b.value[e.column.field]=f),dense:u(t),isSearch:e.isSearch,loading:e.loading,readonly:e.loading||e.readonly,name:""},u(x)),we({_:2},[u(v)(`${e.column.field}B`)?{name:"before",fn:d(()=>[J(m.$slots,e.column.field+"B",{},void 0,!0)]),key:"0"}:void 0,u(v)(`${e.column.field}A`)?{name:"after",fn:d(()=>[J(m.$slots,e.column.field+"A",{},void 0,!0)]),key:"1"}:void 0,u(v)(`${e.column.field}P`)?{name:"prepend",fn:d(()=>[J(m.$slots,e.column.field+"P",{},void 0,!0)]),key:"2"}:void 0,u(v)(`${e.column.field}AP`)?{name:"append",fn:d(()=>[J(m.$slots,e.column.field+"AP",{},void 0,!0)]),key:"3"}:void 0]),1040,["modelValue","dense","isSearch","loading","readonly"]))]),_:3})],2))}};var fl=Ol(ma,[["__scopeId","data-v-35c11ee2"]]);const pa={__name:"QxForm",props:{modelValue:Object,isSearch:Boolean,option:{type:Object,default:()=>({})},dense:{type:Boolean,default:!0}},emits:["submit","update:modelValue"],setup(e,{expose:l,emit:t}){const n=e,o=xe("BgToColor"),i=h(()=>{var r;return(r=n.dense)!=null?r:xe("isDense",!0)}),a=j(null),s=j(!1),v=h(()=>r=>(r==null?void 0:r.label)+(r==null?void 0:r.field)),C=h(()=>(r=[])=>r.filter(D=>n.isSearch?D.search!==!1:D.display!==!1)),w=h(()=>(r={})=>{const{labelPosition:D,labelWidth:F,searchLabelWidth:Q,span:L,searchSpan:R,readonly:N}=n.option||{};if(n.isSearch){const k=K(r.searchLabelWidth)?Q:r.searchLabelWidth;return{loading:s.value,labelPosition:"right",readonly:r.searchReadonly,span:r.searchSpan||R,labelWidth:K(k)?r.labelWidth||F:k}}return{loading:s.value,span:r.span||L,labelPosition:r.labelPosition||D,readonly:K(r.readonly)?N:r.readonly,labelWidth:K(r.labelWidth)?F:r.labelWidth}}),x=h(()=>(r={})=>(r={...r},n.isSearch&&(r.searchType&&(r.type=r.searchType),delete r.hint,delete r.value,delete r.required,r.searchHint&&(r.hint=r.searchHint),r.searchValue&&(r.value=r.searchValue),r.searchRequired&&(r.required=r.searchRequired)),delete r.children,delete r.searchHint,delete r.searchType,delete r.searchValue,delete r.searchRequired,r)),g=Object.keys(Fe()),b=h(()=>r=>g.filter(D=>[r,`${r}A`,`${r}B`,`${r}P`,`${r}AP`].includes(D))),$=h(()=>{const{menuBtn:r,searchMenuBtn:D=!0}=n.option||{};return n.isSearch?D:r}),m=h(()=>{let r;return i.value?r="qx-form-menu-dense":r="qx-form-menu",n.isSearch?(n.option&&n.option.searchMenuSpan?r+=` q-col-${n.option.searchMenuSpan}`:r+=" col",n.option&&n.option.searchMenuPosition&&(r+=` text-${n.option.searchMenuPosition}`),r):(n.option&&n.option.menuSpan?r+=` q-col-${n.option.menuSpan} q-pl-md`:r+=" q-col-24 q-pr-sm",n.option&&n.option.menuPosition?r+=` text-${n.option.menuPosition}`:r+=" text-center",r)}),S=j(0),f=r=>{r.width&&(S.value=r.width)},T=j({}),P=()=>{a.value&&a.value.resetValidation(),T.value=n.modelValue||{}};se(fe(n,"modelValue"),()=>P(),{immediate:!0});const M=()=>{a.value&&a.value.resetValidation(),T.value={},t("update:modelValue",T.value)},I=()=>{s.value=!1},c=(r,D)=>{a.value.validate().then(F=>{F?r&&(s.value=!0,r(T.value,I)):D&&D()})},_=()=>{s.value=!0,t("submit",T.value,I)};return l({onReset:M,validate:c}),(r,D)=>{const F=Ge("qx-btn");return p(),A(ae,null,[y(Xl,{ref_key:"QxForm",ref:a,class:pe([e.isSearch?"qx-form-search":"qx-form-normal","qx-form full-width row q-col-gutter-sm items-start rounded-borders"]),onReset:M,onSubmit:_},{default:d(()=>[S.value>0||e.isSearch?(p(),A(ae,{key:0},[(p(!0),A(ae,null,me(u(C)(e.option.column),(Q,L)=>(p(),A(ae,{key:u(v)(Q)},[Q.children?(p(),U(gl,{key:0,disable:s.value,group:`group-${L}`,label:Q.label,class:"full-width qx-form-children","default-opened":"","switch-toggle-side":""},{default:d(()=>[y(qt,{class:"row q-col-gutter-sm"},{default:d(()=>[(p(!0),A(ae,null,me(u(C)(Q.children),R=>(p(),U(fl,Z({key:u(v)(R),modelValue:T.value,"onUpdate:modelValue":D[0]||(D[0]=N=>T.value=N),column:u(x)(R),dense:u(i),formWidth:S.value,isSearch:e.isSearch},u(w)(r.cCoumn)),we({_:2},[me(u(b)(R.field),N=>({name:N,fn:d(({attrs:k})=>[J(r.$slots,N,{attrs:k})])}))]),1040,["modelValue","column","dense","formWidth","isSearch"]))),128))]),_:2},1024)]),_:2},1032,["disable","group","label"])):(p(),U(fl,Z({key:1,modelValue:T.value,"onUpdate:modelValue":D[1]||(D[1]=R=>T.value=R),column:u(x)(Q),dense:u(i),formWidth:S.value,isSearch:e.isSearch},u(w)(Q)),we({_:2},[me(u(b)(Q.field),R=>({name:R,fn:d(({attrs:N})=>[J(r.$slots,R,{attrs:N})])}))]),1040,["modelValue","column","dense","formWidth","isSearch"]))],64))),128)),u($)?(p(),A("div",{key:0,class:pe(u(m))},[y(ie,{color:e.isSearch?"primary":"",loading:s.value,"text-color":e.isSearch?u(o)("primary"):"primary",class:"q-ml-sm","no-wrap":"",type:"submit"},{default:d(()=>[e.isSearch?(p(),A(ae,{key:0},[y(be,{name:"search"}),X(" "+z(e.option.searchText||r.$t("Search")),1)],64)):(p(),A(ae,{key:1},[y(be,{name:"published_with_changes"}),X(" "+z(e.option.submitText||r.$t("Submit")),1)],64))]),_:1},8,["color","loading","text-color"]),e.option.resetBtn!==!1?(p(),U(F,{key:0,loading:s.value,"no-wrap":"","text-color":"negative",type:"reset"},{default:d(()=>[y(be,{name:"restore"}),X(" "+z(e.option.resetText||r.$t("Reset")),1)]),_:1},8,["loading"])):Y("",!0),J(r.$slots,"menuRight",{loading:s.value})],2)):Y("",!0)],64)):Y("",!0)]),_:3},8,["class"]),e.isSearch?Y("",!0):(p(),U(Vt,{key:0,debounce:"1000",onResize:f}))],64)}}};var va=Object.freeze(Object.defineProperty({__proto__:null,default:pa},Symbol.toStringTag,{value:"Module"}));const ha={class:"text-h6 text-weight-medium text-primary"},ga={__name:"QxPage",props:{height:Boolean,loading:Boolean,menuBtn:{type:Boolean,default:!0},modelValue:Boolean},emits:["confirm","update:modelValue","update:loading"],setup(e,{emit:l}){const t=e,n=Cl(),o=xe("isDense",!0),i=j(!1),a=j(!1),s=j(!1),v=h(()=>{let b=40;return t.menuBtn&&(b+=50),t.height?{height:`calc(100% - ${b}px)`}:{maxHeight:`calc(100% - ${b}px)`}});se(fe(t,"modelValue"),b=>{b&&!i.value&&(i.value=b),a.value=b}),se(fe(t,"loading"),b=>{s.value=b},{immediate:!0});const C=De({"fab-mini":!0,round:!0,flat:!0}),w=b=>{if(b===!1){s.value=!1,l("update:loading",!1);return}s.value=!1,l("update:loading",!1),g()},x=()=>{s.value=!0,l("confirm",w)},g=()=>{const b=n.onBeforeClose||n.beforeClose;b&&typeof b=="function"?b():(a.value=!1,l("update:modelValue",!1))};return(b,$)=>{const m=Ge("qx-btn");return p(),U(gn,{name:"q-transition--scale"},{default:d(()=>[i.value?He((p(),U(qt,{key:"email-button",class:"qx-page"},{default:d(()=>[y(Ft,{class:"qx-page-header"},{default:d(()=>[re("span",ha,z(u(n).header||b.$t("Title")),1),y(zt),u(n).closeBtn!==!1?(p(),U(ie,Z({key:0,dense:u(o),class:"q-btn-tip",icon:"reply_all"},C,{onClick:g}),{default:d(()=>[y(Ve,ke(Ae(b.$tooltipAttr)),{default:d(()=>[X(z(b.$t("GoBack")),1)]),_:1},16)]),_:1},16,["dense"])):Y("",!0)]),_:1}),re("div",{style:_e(u(v)),class:"qx-page-content"},[J(b.$slots,"default")],4),e.menuBtn?(p(),U(Ft,{key:0,class:"qx-page-footer rounded-borders flex-center"},{default:d(()=>[J(b.$slots,"menuLeft"),u(n).submitBtn!==!1?(p(),U(m,{key:0,loading:s.value,icon:"published_with_changes","no-wrap":"",padding:".4em 1.5em","text-color":"primary",onClick:x},{default:d(()=>[X(z(u(n).submitText||b.$t("Confirm")),1)]),_:1},8,["loading"])):Y("",!0),u(n).closeBtn!==!1?(p(),U(m,{key:1,loading:s.value,icon:"cancel_schedule_send","no-wrap":"",padding:".4em 1.5em","text-color":"negative",onClick:g},{default:d(()=>[X(z(u(n).closeText||b.$t("Close")),1)]),_:1},8,["loading"])):Y("",!0),J(b.$slots,"menuRight")]),_:3})):Y("",!0),y(Qe,{showing:s.value},{default:d(()=>[y(We,{color:"primary",size:"50px"})]),_:1},8,["showing"])]),_:3},512)),[[Rt,a.value]]):Y("",!0)]),_:3})}}};var ya=Object.freeze(Object.defineProperty({__proto__:null,default:ga},Symbol.toStringTag,{value:"Module"}));function El(e="left",l=[],t=0){var a;const n=[];let o=0;const i=l.length;for(o;o<i;o++){if(l[o].hide)continue;const s=l[o];if(s.required=s.showColumn,["index","menu"].includes(s.name)||(s.name=`${s.field}$$${t}-${o}`),s.align=s.align||e,s.style=s.style||"",s.headerStyle=s.headerStyle||"",s.exportWidth&&(s.exportWidth=Number(s.exportWidth.replace("px","").replace("%",""))),s.width){const v=isNaN(Number(s.width))?s.width:`${s.width}px`;s.style+=`width: ${v}; `,s.headerStyle+=`width: ${v}; `,s.exportWidth||(s.exportWidth=Number(v.replace("px","").replace("%",""))),delete s.width}if(s.minWidth){const v=isNaN(Number(s.minWidth))?s.minWidth:`${s.minWidth}px`;s.style+=`min-width: ${v};`,s.headerStyle+=`min-width: ${v};`,s.exportWidth||(s.exportWidth=Number(v.replace("px","").replace("%",""))),delete s.minWidth}(a=s==null?void 0:s.children)!=null&&a.length?n.push.apply(n,El(e,s.children,t+1)):n.push(s)}return n}const Pl=(e,l="children")=>{const t=[];return e.forEach(n=>{var o;n.hide||(t.push(n),(o=n[l])!=null&&o.length&&t.push.apply(t,Pl(n[l])))}),t};function ba(e=[]){let l=1;const t=(i,a)=>{if(a&&(i.level=a.level+1,l<i.level&&(l=i.level)),i.children){let s=0;i.children.forEach(v=>{v.hide||(t(v,i),s+=v.colSpan)}),i.colSpan=s}else i.colSpan=1};e.forEach(i=>{i.hide||(i.level=1,t(i))});const n=[];for(let i=0;i<l;i++)n.push([]);return Pl(e).forEach(i=>{i.children?i.rowSpan=1:i.rowSpan=l-i.level+1,n[i.level-1].push(i)}),n}function Ie(e={}){if(K(e.value))return"";if(ne(e.options)!=="array")return e.value;const l=e.props||{},t=(l.label||"label").split(",")[0];if(e.multiple){const o=e.value.split(",");let i=e.options.filter(a=>ne(a)==="object"?o.includes(a[l.value||"value"]):o.includes(a));return i=i.map(a=>ne(a)==="object"?a[t]:a),i.join(", ")||e.value}const n=e.options.find(o=>ne(o)==="object"?e.value===o[l.value||"value"]:e.value===o);return ne(n)==="object"?n[t]:n||e.value}function Ml(e="",l={}){return typeof e=="function"?e(l):e}const _a={class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3 grid-style-transition"},ka={class:""},xa={class:"table-menu q-gutter-sm"},Sa={key:1},wa={__name:"TableGrid",props:{props:Object,childKey:String,treeNode:String,selection:String,rowClick:Function,cellClick:Function,headerClick:Function,headerCellClick:Function,rowCls:[String,Function]},emits:["toggleExpand"],setup(e,{emit:l}){const t=e,n=xe("isDark",!1),o=h(()=>t.childKey||"children"),i=(m={},S={})=>{var f;if(!!t.treeNode)return(f=m[o.value])!=null&&f.length?S.field===t.treeNode:!1},a=h(()=>{const{cols:m,row:S}=t.props||{};return m.filter(f=>!["index","menu"].includes(f.name)).map(f=>({...f,__has_child:i(S,f)}))}),s=h(()=>(m={})=>!m.tagColors||K(m.value)?"primary":m.tagColors[m.value]||"primary"),v=(m={})=>{var M;const{treeNode:S,props:f={}}=t,{row:T={}}=f;if(!S)return;let P=0;if((M=T[o.value])!=null&&M.length||(P=16),m.field===S)return{"margin-left":`${Number(T.level||0)*10+P}px`}},C=m=>l("toggleExpand",m,o.value),w=m=>{if(m.headerClick)return m.headerClick(m);if(t.headerCellClick)return t.headerCellClick(m);if(t.headerClick)return t.headerClick(t.props,m)},x=h(()=>m=>{if(m.headerClick||t.headerCellClick)return"cursor-pointer text-primary";if(t.headerClick)return"cursor-pointer"}),g=m=>{if(m.__has_child)return C(t.props);const{row:S}=t.props||{};if(m.cellClick)return m.cellClick(S);if(t.cellClick)return t.cellClick(S);if(t.rowClick)return t.rowClick(S)},b=De({"text-subtitle1":!0,"text-capitalize":!0}),$=h(()=>m=>{if(m.__has_child)return"cursor-pointer";if(m.cellClick||t.cellClick)return"cursor-pointer text-primary";if(t.rowClick)return"cursor-pointer"});return(m,S)=>(p(),A("div",_a,[y(qt,{class:pe(e.props.selected?u(n)?"bg-grey-9":"bg-grey-2":"")},{default:d(()=>[y(yl,{class:"row justify-between items-center"},{default:d(()=>[re("div",ka,[y(be,{class:"q-mr-sm"},{default:d(()=>[X(z(e.props.rowIndex+1),1)]),_:1}),e.selection?J(m.$slots,"selection",{key:0,props:e.props}):Y("",!0)]),re("div",xa,[J(m.$slots,"menu")])]),_:3}),y(bt),y(Jl,{class:pe(u(Ml)(e.rowCls,e.props)),dense:""},{default:d(()=>[(p(!0),A(ae,null,me(u(a),f=>(p(),A(ae,{key:f.name},[y(Tt,{class:pe(u(x)(f)),onClick:Se(T=>w(f),["stop"])},{default:d(()=>[f.headerSlot?(p(),A("span",{key:0,class:pe(b)},[J(m.$slots,f.field+"H",{row:f})],2)):(p(),A("span",{key:1,class:pe(b)},z(f.label),3))]),_:2},1032,["class","onClick"]),y(Tt,{class:pe(u($)(f)),style:_e(v(f)),caption:"",onClick:Se(T=>g(f),["stop"])},{default:d(()=>[f.__has_child?(p(),U(be,{key:0,name:e.props.expand?"keyboard_arrow_down":"keyboard_arrow_right",class:"expand-btn",onClick:S[0]||(S[0]=Se(T=>C(e.props),["stop"]))},null,8,["name"])):Y("",!0),f.slot?J(m.$slots,f.field,{key:1}):(p(),A(ae,{key:2},[f.useTag&&!u(K)(f.value)?(p(),A(ae,{key:0},[y(ot,{color:u(s)(f),rounded:""},null,8,["color"]),X(" "+z(u(Ie)(f)),1)],64)):(p(),A("span",Sa,z(u(Ie)(f)),1))],64))]),_:2},1032,["class","style","onClick"])],64))),128))]),_:3},8,["class"])]),_:3},8,["class"])]))}},Be={__name:"QxTooltip",props:{mask:String,rowsNum:{type:[Number,String],default:1},modelValue:[String,Number,Date,Array,Object]},setup(e){const l=e,t=j(!0),n=a=>l.mask?it.formatDate(a,l.mask):a,o=h(()=>{let a="";const s=Fe().default;if(s&&s())for(const v of s())a+=v.children;return K(a)&&(a=l.modelValue||""),n(a)}),i=a=>{const s=a.target||a,v=s.scrollHeight>s.clientHeight+2,C=s.scrollWidth>s.clientWidth;if(v||C){t.value=!0;return}t.value=!1};return(a,s)=>(p(),A("span",{style:_e({"-webkit-line-clamp":e.rowsNum}),class:"multiRow_5",onMouseenter:i},[X(z(u(o))+" ",1),t.value?(p(),U(Ve,ke(Z({key:0},a.$tooltipAttr)),{default:d(()=>[X(z(u(o)),1)]),_:1},16)):Y("",!0)],36))}};var $a=Object.freeze(Object.defineProperty({__proto__:null,default:Be},Symbol.toStringTag,{value:"Module"}));const Ca={class:"q-gutter-sm"},Va={__name:"TableTd",props:{props:Object,childKey:String,treeNode:String,fixedObj:Object,selection:String,rowClick:Function,cellClick:Function,mergeCells:Function,rowCls:[String,Function]},emits:["toggleExpand"],setup(e,{emit:l}){const t=e,n="qx-fixed-column-td-",o=j(null),i=j([]),a=c=>{const{row:_={},rowIndex:r=0}=t.props||{},D=i.value[r]||{};return!t.mergeCells||typeof t.mergeCells!="function"?D[c.name]=[1,1]:D[c.name]=t.mergeCells({row:_,column:c,value:c.value,rowIndex:r})||[1,1],i.value[r]=D,D[c.name]},s=(c={},_=0)=>{const{rowIndex:r=0}=t.props||{};return i.value[r][c.name][_]},v=h(()=>t.childKey||"children"),C=(c={},_={})=>{var r;if(!!t.treeNode)return(r=c[v.value])!=null&&r.length?_.field===t.treeNode:!1},w=h(()=>{const{cols:c,row:_}=t.props||{};return c.filter(r=>{if(r.fixed!=="left"||["index","menu"].includes(r.name))return!1;if(a(r)[0]>0)return!0;const{rowIndex:D=0}=t.props||{};return i.value[D][r.name][1]>0}).map(r=>({...r,__has_child:C(_,r)}))}),x=h(()=>{const{cols:c,row:_}=t.props||{};return c.filter(r=>{if(r.fixed||["index","menu"].includes(r.name))return!1;if(a(r)[0]>0)return!0;const{rowIndex:D=0}=t.props||{};return i.value[D][r.name][1]>0}).map(r=>({...r,__has_child:C(_,r)}))}),g=h(()=>{const{cols:c,row:_}=t.props||{};return c.filter(r=>{if(r.fixed!=="right"||["index","menu"].includes(r.name))return!1;if(a(r)[0]>0)return!0;const{rowIndex:D=0}=t.props||{};return i.value[D][r.name][1]>0}).map(r=>({...r,__has_child:C(_,r)}))}),b=h(()=>(c={})=>{var r;const _=(r=t.fixedObj)==null?void 0:r[c.name];if(_)return{left:_}}),$=h(()=>(c={})=>{var r;const _=(r=t.fixedObj)==null?void 0:r[c.name];if(_)return{right:_}}),m=h(()=>(c={})=>!c.tagColors||K(c.value)?"primary":c.tagColors[c.value]||"primary"),S=(c={},_={})=>{var F;if(!t.treeNode)return;const{row:r={}}=c;let D=0;if((F=r[v.value])!=null&&F.length||(D=16),_.field===t.treeNode)return{"margin-left":`${Number(r.level||0)*10+D}px`}},f=c=>l("toggleExpand",c,v.value),T=c=>{if(c.__has_child)return f(t.props);const{row:_}=t.props||{};if(c.cellClick)return c.cellClick(_);if(t.cellClick)return t.cellClick(_)},P=h(()=>c=>{let _="";return c.fixed&&(_=`${n}${c.name} `),c.__has_child?_+"cursor-pointer":c.cellClick||t.cellClick?_+"cursor-pointer text-primary":t.rowClick?_+"cursor-pointer":c.className?_+" "+c.className:_}),M=xe("isDense",!0),I=h(()=>M.value?t.selection?"36px":0:t.selection?"52px":0);return(c,_)=>(p(),U(_l,{ref_key:"TableTD",ref:o,class:pe(u(Ml)(e.rowCls,e.props)),props:e.props,onClick:_[3]||(_[3]=r=>e.rowClick&&e.rowClick(e.props))},{default:d(()=>[e.selection?(p(),U(Je,{key:0,class:"qx-table--selection-td"},{default:d(()=>[J(c.$slots,"selection",{props:e.props})]),_:3})):Y("",!0),y(Je,{key:"index",props:e.props,style:_e({left:u(I)}),class:"qx-table--index-td"},{default:d(()=>[X(z(e.props.rowIndex+1),1)]),_:1},8,["props","style"]),(p(!0),A(ae,null,me(u(w),r=>(p(),U(Je,{key:r.name,class:pe(u(P)(r)),colspan:s(r,1),props:e.props,rowspan:s(r),style:_e(u(b)(r)),onClick:Se(D=>T(r),["stop"])},{default:d(()=>[re("div",{style:_e(S(e.props,r))},[r.__has_child?(p(),U(be,{key:0,name:e.props.expand?"keyboard_arrow_down":"keyboard_arrow_right",class:"expand-btn",onClick:_[0]||(_[0]=Se(D=>f(e.props),["stop"]))},null,8,["name"])):Y("",!0),r.slot?J(c.$slots,r.field,{key:1}):(p(),A(ae,{key:2},[r.useTag&&!u(K)(r.value)?(p(),A(ae,{key:0},[y(ot,{color:u(m)(r),rounded:""},null,8,["color"]),X(" "+z(u(Ie)(r)),1)],64)):(p(),U(Be,{key:1,rowsNum:r.rowsNum||3},{default:d(()=>[X(z(u(Ie)(r)),1)]),_:2},1032,["rowsNum"]))],64))],4)]),_:2},1032,["class","colspan","props","rowspan","style","onClick"]))),128)),(p(!0),A(ae,null,me(u(x),r=>(p(),U(Je,{key:r.name,class:pe(u(P)(r)),colspan:s(r,1),props:e.props,rowspan:s(r),onClick:Se(D=>T(r),["stop"])},{default:d(()=>[re("div",{style:_e(S(e.props,r))},[r.__has_child?(p(),U(be,{key:0,name:e.props.expand?"keyboard_arrow_down":"keyboard_arrow_right",class:"expand-btn",onClick:_[1]||(_[1]=Se(D=>f(e.props),["stop"]))},null,8,["name"])):Y("",!0),r.slot?J(c.$slots,r.field,{key:1}):(p(),A(ae,{key:2},[r.useTag&&!u(K)(r.value)?(p(),A(ae,{key:0},[y(ot,{color:u(m)(r),rounded:""},null,8,["color"]),X(" "+z(u(Ie)(r)),1)],64)):(p(),U(Be,{key:1,rowsNum:r.rowsNum||3},{default:d(()=>[X(z(u(Ie)(r)),1)]),_:2},1032,["rowsNum"]))],64))],4)]),_:2},1032,["class","colspan","props","rowspan","onClick"]))),128)),(p(!0),A(ae,null,me(u(g),r=>(p(),U(Je,{key:r.name,class:pe(u(P)(r)),colspan:s(r,1),props:e.props,rowspan:s(r),style:_e(u($)(r)),onClick:Se(D=>T(r),["stop"])},{default:d(()=>[re("div",{style:_e(S(e.props,r))},[r.__has_child?(p(),U(be,{key:0,name:e.props.expand?"keyboard_arrow_down":"keyboard_arrow_right",class:"expand-btn",onClick:_[2]||(_[2]=Se(D=>f(e.props),["stop"]))},null,8,["name"])):Y("",!0),r.slot?J(c.$slots,r.field,{key:1}):(p(),A(ae,{key:2},[r.useTag&&!u(K)(r.value)?(p(),A(ae,{key:0},[y(ot,{color:u(m)(r),rounded:""},null,8,["color"]),X(" "+z(u(Ie)(r)),1)],64)):(p(),U(Be,{key:1,rowsNum:r.rowsNum||3},{default:d(()=>[X(z(u(Ie)(r)),1)]),_:2},1032,["rowsNum"]))],64))],4)]),_:2},1032,["class","colspan","props","rowspan","style","onClick"]))),128)),y(Je,{key:"menu",props:e.props,class:"qx-table--menu-td"},{default:d(()=>[re("div",Ca,[J(c.$slots,"menu")])]),_:3},8,["props"])]),_:3},8,["class","props"]))}},Ta={__name:"TableTh",props:{index:Number,props:Object,columns:Array,fixedObj:Object,selection:String,headerClick:Function,headerCellClick:Function},setup(e){const l=e,t="qx-fixed-column-",n=xe("isDense",!0),o=j(null),i=j({}),a=()=>{i.value=l.fixedObj||{}};se(fe(l,"fixedObj"),()=>{a()},{immediate:!0});const s=h(()=>l.index===0),v=h(()=>n.value?l.selection?"36px":0:l.selection?"52px":0),C=h(()=>(l.columns||[]).filter(c=>!["index","menu"].includes(c.name)&&c.fixed==="left")),w=h(()=>(l.columns||[]).filter(c=>!["index","menu"].includes(c.name)&&!c.fixed)),x=h(()=>(l.columns||[]).filter(c=>!["index","menu"].includes(c.name)&&c.fixed==="right")),g=h(()=>{if(!o.value)return{left:0};const c=o.value.$el.querySelector(".qx-table--index");return c?{left:((Me.offset(c)||{}).left||0)-parseInt(Me.style(c,"left"))}:{left:0}}),b=h(()=>(c={})=>{if(i.value[c.name])return{left:i.value[c.name]};if(!o.value)return;const _=o.value.$el.querySelector(`.${t}${c.name}`);if(!_)return;const r=`${Me.offset(_).left-g.value.left}px`;return i.value[c.name]=r,{left:r}}),$=h(()=>{if(!o.value)return{width:0};const c=o.value.$el.querySelector(".qx-table--menu");return c?{width:Me.width(c)}:{width:0}}),m=h(()=>{if(!o.value)return 0;let c=$.value.width;for(const _ of x.value){const r=o.value.$el.querySelector(`.${t}${_.name}`);r&&(c+=Me.width(r))}return c}),S=h(()=>{let c=0;return(_={})=>{if(i.value[_.name])return{right:i.value[_.name]};if(!o.value)return;const r=o.value.$el.querySelector(`.${t}${_.name}`);if(!r)return;c+=Me.width(r);const D=`${m.value-c}px`;return i.value[_.name]=D,{right:D}}}),f=h(()=>(l.columns||[]).find(c=>c.name==="menu")||{}),T=h(()=>c=>{if(K(c.children))return l.props}),P=h(()=>c=>{let _="";return c.fixed&&(_=`${t}${c.name} `),c.headerClick||l.headerCellClick?_+"cursor-pointer text-primary":l.headerClick?_+"cursor-pointer":_}),M=c=>{if(c.headerClick)return c.headerClick(c);if(l.headerCellClick)return l.headerCellClick(c)},I=De({class:"text-subtitle1 text-capitalize"});return(c,_)=>(p(),U(_l,{ref_key:"TableTH",ref:o,class:pe(u(s)?"":"non-first-row"),props:e.props,onClick:_[0]||(_[0]=r=>e.headerClick&&e.headerClick(e.props))},{default:d(()=>[e.selection&&u(s)?(p(),U(et,{key:"selection",class:"qx-table--selection",rowspan:"100%"},{default:d(()=>[e.selection==="multiple"?J(c.$slots,"selection",{key:0,props:e.props}):Y("",!0)]),_:3})):Y("",!0),u(s)?(p(),U(et,{key:"index",props:e.props,style:_e({left:u(v)}),class:"qx-table--index",rowspan:"100%"},{default:d(()=>[re("span",ke(Ae(I)),"#",16)]),_:1},8,["props","style"])):Y("",!0),(p(!0),A(ae,null,me(u(C),r=>(p(),U(et,{key:r.name,class:pe(u(P)(r)),colSpan:r.colSpan,props:u(T)(r),rowSpan:r.rowSpan,style:_e(u(b)(r)),onClick:D=>M(r)},{default:d(()=>[r.headerSlot?(p(),A("div",ke(Z({key:0},I)),[J(c.$slots,r.field+"H",{row:r})],16)):(p(),A("div",ke(Z({key:1},I)),z(r.label),17))]),_:2},1032,["class","colSpan","props","rowSpan","style","onClick"]))),128)),(p(!0),A(ae,null,me(u(w),r=>(p(),U(et,{key:r.name,class:pe(u(P)(r)),colSpan:r.colSpan,props:u(T)(r),rowSpan:r.rowSpan,onClick:D=>M(r)},{default:d(()=>[r.headerSlot?(p(),A("div",ke(Z({key:0},I)),[J(c.$slots,r.field+"H",{row:r})],16)):(p(),A("div",ke(Z({key:1},I)),z(r.label),17))]),_:2},1032,["class","colSpan","props","rowSpan","onClick"]))),128)),(p(!0),A(ae,null,me(u(x),r=>(p(),U(et,{key:r.name,class:pe(u(P)(r)),colSpan:r.colSpan,props:u(T)(r),rowSpan:r.rowSpan,style:_e(u(S)(r)),onClick:D=>M(r)},{default:d(()=>[r.headerSlot?(p(),A("div",ke(Z({key:0},I)),[J(c.$slots,r.field+"H",{row:r})],16)):(p(),A("div",ke(Z({key:1},I)),z(r.label),17))]),_:2},1032,["class","colSpan","props","rowSpan","style","onClick"]))),128)),u(s)?(p(),U(et,{key:"menu",props:e.props,class:"qx-table--menu",rowspan:"100%"},{default:d(()=>[re("span",ke(Ae(I)),z(u(f).label),17)]),_:1},8,["props"])):Y("",!0)]),_:3},8,["class","props"]))}},ja={class:"full-width row justify-between"},Na={class:"q-gutter-x-sm row items-center"},qa={key:0,class:"q-gutter-x-sm row items-center"},Ba={__name:"TableTop",props:{props:Object,grid:Boolean,rightBtn:{type:Boolean,default:!0},columns:{type:Array,default(){return[]}},gridBtn:Boolean,multiColumn:Array,searchBtn:Boolean,refreshBtn:Boolean,isFullscreen:Boolean,dynamicColumns:Array},emits:["refresh","update:isFullscreen","update:grid","update:dynamicColumns"],setup(e,{emit:l}){const t=e,n=xe("isDense",!0),o=j(!t.rightBtn),i=j(t.dynamicColumns||[]),a=h(()=>{var f;return((f=t.multiColumn)==null?void 0:f.length)===1});Ke(()=>{o.value=!0});const s=h(()=>f=>f?"view_list":"grid_view"),v=h(()=>f=>f.inFullscreen?"fullscreen_exit":"zoom_out_map"),C=h(()=>t.columns.filter(f=>!f.required).map(f=>({label:f.label,value:f.name}))),w={backgroundColor:"transparent",opacity:0},x=h(()=>({round:!0,dense:n.value,size:"13px",textColor:"primary"}));Ht(()=>l("update:dynamicColumns",i.value));const g=()=>{t.dynamicColumns&&(i.value=[...t.dynamicColumns])},b=()=>l("refresh"),$=()=>l("update:grid",!t.grid),m=()=>o.value=!o.value,S=f=>{l("update:isFullscreen",!t.isFullscreen),f.toggleFullscreen()};return(f,T)=>(p(),A(ae,null,[e.searchBtn?Y("",!0):J(f.$slots,"top",{key:0}),e.searchBtn?(p(),U(kl,{key:1,class:"full-width"},{default:d(()=>[He(re("div",null,[J(f.$slots,"top")],512),[[Rt,o.value]])]),_:3})):Y("",!0),re("div",ja,[re("div",Na,[J(f.$slots,"menuLeft")]),y(zt),e.rightBtn?(p(),A("div",qa,[J(f.$slots,"menuRight",{btnAttr:u(x)}),e.refreshBtn?(p(),U(ie,Z({key:0,class:"q-btn-refresh",icon:"cached"},u(x),{onClick:b}),{default:d(()=>[y(Ve,Z({class:"text-no-wrap"},f.$tooltipAttr),{default:d(()=>[X(z(f.$t("Refresh")),1)]),_:1},16)]),_:1},16)):Y("",!0),e.gridBtn&&!f.$q.screen.xs?(p(),U(ie,Z({key:1,icon:u(s)(e.grid)},u(x),{onClick:$}),{default:d(()=>[y(Ve,Z({class:"text-no-wrap"},f.$tooltipAttr),{default:d(()=>[X(z(e.grid?f.$t("List"):f.$t("Grid")),1)]),_:1},16)]),_:1},16,["icon"])):Y("",!0),y(ie,Z({icon:u(v)(e.props)},u(x),{onClick:T[0]||(T[0]=P=>S(e.props))}),{default:d(()=>[y(Ve,Z({class:"text-no-wrap"},f.$tooltipAttr),{default:d(()=>[X(z(e.props.inFullscreen?f.$t("ExitFullScreen"):f.$t("FullScreen")),1)]),_:1},16)]),_:1},16,["icon"]),e.searchBtn?(p(),U(ie,Z({key:2,icon:"search"},u(x),{onClick:m}),{default:d(()=>[y(Ve,Z({class:"text-no-wrap"},f.$tooltipAttr),{default:d(()=>[X(z(f.$t("Search")+f.$t("ShowHide")),1)]),_:1},16)]),_:1},16)):Y("",!0),u(a)?(p(),U(ie,Z({key:3,icon:"tune"},u(x),{onClick:g}),{default:d(()=>[y(Ve,Z({class:"text-no-wrap"},f.$tooltipAttr),{default:d(()=>[X(z(f.$t("Column")+f.$t("ShowHide")),1)]),_:1},16),y(at,{offset:[10,10],anchor:"bottom left",breakpoint:"0",class:"q-pa-md dynamic-column-popup",self:"top left","transition-hide":"jump-up","transition-show":"jump-down"},{default:d(()=>[y(Et,{"thumb-style":w,visible:!1,class:"fit"},{default:d(()=>[y(Qt,{modelValue:i.value,"onUpdate:modelValue":T[1]||(T[1]=P=>i.value=P),options:u(C),type:"checkbox"},null,8,["modelValue","options"])]),_:1})]),_:1})]),_:1},16)):Y("",!0)])):Y("",!0)])],64))}},La={class:"full-width text-center text-italic text-body2"},Oa={class:"full-width text-center text-italic text-body2"},Fa={class:"qx-table-bottom row justify-between"},Ea={class:"row q-gutter-x-sm items-center"},Pa={key:0,class:"selected-tips text-subtitle1"},Ma={key:0,class:"q-gutter-x-sm row items-center"},Ia={class:"text-subtitle1"},Xt={__name:"QxTable",props:{data:Array,option:Object,selected:Array,loading:Boolean,fileName:String,rowClick:Function,cellClick:Function,formatData:Function,mergeCells:Function,headerClick:Function,headerCellClick:Function,rowKey:[String,Function],rowCls:[String,Function],remoteData:[Function,Object]},emits:["update:selected","update:loading"],setup(e,{expose:l,emit:t}){const n=e,o=j(null),i=Fe(),a=j([]),s=j(n.data||[]),v=h(()=>{const{index:V=!0,column:E=[],menu:le,menuWidth:oe=80,menuText:W=ee.t("Operation")}=n.option||{},te=Te(E);if(V){const he="width: 50px; min-width: 50px;";te.unshift({name:"index",label:"#",showColumn:!0,headerStyle:he,style:he,align:"center",field:"index",export:!1})}if(le){const he=`width: ${oe}px; min-width: ${oe}px`;te.push({name:"menu",label:W,headerStyle:he,showColumn:!0,style:he,align:"center",field:"menu",export:!1})}return te}),C=j({}),w=j([]),x=h(()=>ba(v.value)),g=h(()=>{var V;return El((V=n.option)==null?void 0:V.align,v.value)}),b=j(!1),$=j(!1),m=j(!1),S=h(()=>s.value.length>100),f=h(()=>{if(!S.value||!o.value)return 0;const V=o.value.$el.querySelector("thead");return V?Me.height(V):0}),T=h(()=>{const{searchBtn:V=!0}=n.option||{};return V?!!i.top:!1}),P=h(()=>{const{refreshBtn:V}=n.option||{};return V!=null?V:!!c.value}),M=h(()=>{const{rightBtn:V}=n.option||{};return V!==!1}),I=h(()=>!s.value.length||F.value.length?!1:!(i.bottomLeft||_.value)),c=h(()=>{const{remoteData:V}=n;if(typeof V=="function")return V();if(typeof V=="object")return V}),_=h(()=>{const{page:V}=n.option||{};return V!==!1&&c.value}),r=j({page:1,rowsPerPage:_.value?20:0,rowsNumber:_.value?0:void 0,sortBy:"",descending:!1}),D=h(()=>{const V=r.value.rowsNumber/(r.value.rowsPerPage||1);return Math.ceil(V)||1}),F=j([]),Q=h(()=>{var V;return(V=n.option)==null?void 0:V.selection}),L=()=>{F.value!==n.selected&&(F.value=n.selected||[])},R=()=>ve(()=>t("update:selected",F.value));se(()=>n.selected,()=>L(),{immediate:!0});const N=h(()=>m.value?"qx-full-table qx-table":"qx-table"),k=h(()=>{if(m.value)return;const{height:V,maxHeight:E="100%"}=n.option||{};return V?{height:V}:E?{maxHeight:E}:{}}),B=h(()=>V=>`${V.field}H`),H=h(()=>(V=[],E="")=>E==="H"?V.filter(le=>le.headerSlot):V.filter(le=>le.slot)),ce=V=>w.value=V.filter(E=>!E.required).map(E=>E.name);Ht(()=>ve(()=>ce(g.value)));const $e=async(V,E)=>{if(n.formatData&&typeof formatData=="function"){const le=await n.formatData(V,r)||{};s.value=le.data||[],r.value.page=+(le.pageNum||1),r.value.rowsNumber=+(le.total||0),$.value=!1}else s.value=[],await ve(()=>{s.value=V.rows||V,r.value.page=+(V.pageNum||1),r.value.rowsNumber=+(V.total||0),E&&E(),$.value=!1,t("update:loading",!1)})},Ne=ln((V={pagination:r.value})=>{const{sortBy:E,descending:le}=V.pagination;if(a.value=[],r.value.sortBy=E,r.value.descending=le,!c.value){s.value=[],ve(()=>s.value=n.data||[]);return}if(typeof c.value.params=="string")return;c.value.clearSelected&&(q(),delete c.value.clearSelected),$.value=!0,t("update:loading",!0);const oe=Date.now()+1e3,W=Te(c.value),te=W.dicMethod==="get"?Bt:Ye;W.params=W.params||{},_.value?(W.params.pageNum=r.value.page,W.params.pageSize=r.value.rowsPerPage):W.params.pageSize="-1",te(W.dicUrl,W.params,he=>{const ue=oe-Date.now();if(ue>0){let Ee=setTimeout(()=>{$e(he,W.done),clearTimeout(Ee),Ee=null},ue)}else $e(he,W.done)},()=>{s.value=[],$.value=!1,t("update:loading",!1)})},1e3);se(()=>n.data,()=>Ne()),se(()=>n.remoteData,()=>Ne(),{deep:!0});const xt=(V={},E)=>{if(V.expand){V.expand=!1,a.value=a.value.filter(W=>W!==V.key);const{parentId:oe="parentIds"}=n.option||{};s.value=s.value.filter(W=>!W[oe].split(",").includes(V.key));return}V.expand=!0,[0,"0"].includes(V.row.level)&&(a.value=[V.key],s.value=s.value.filter(oe=>[0,"0"].includes(oe.level)));const le=s.value.findIndex(oe=>oe.id===V.key);s.value.splice(le+1,0,...V.row[E])},O=h(()=>[{label:`5${ee.t("ItemPage")}`,value:5},{label:`10${ee.t("ItemPage")}`,value:10},{label:`20${ee.t("ItemPage")}`,value:20},{label:`50${ee.t("ItemPage")}`,value:50},{label:`100${ee.t("ItemPage")}`,value:100}]),G=De({outlined:!0,"options-dense":!0,dense:!0,options:O,"emit-value":!0,"map-options":!0}),q=()=>{o.value&&o.value.clearSelection(),t("update:selected",[])};return l({clearSelection:q}),(V,E)=>{var oe;const le=Ge("q-export");return p(),U(tn,{ref_key:"QxTable",ref:o,expanded:a.value,"onUpdate:expanded":E[9]||(E[9]=W=>a.value=W),pagination:r.value,"onUpdate:pagination":E[10]||(E[10]=W=>r.value=W),selected:F.value,"onUpdate:selected":E[11]||(E[11]=W=>F.value=W),class:pe(u(N)),columns:u(g),grid:!u(S)&&(b.value||V.$q.screen.xs),"hide-bottom":u(I),loading:e.loading||$.value,"row-key":(oe=e.rowKey)!=null?oe:"id",rows:s.value,selection:u(Q),style:_e(u(k)),"virtual-scroll":u(S),"virtual-scroll-sticky-size-start":u(f),"visible-columns":w.value,bordered:"",dense:"","hide-pagination":"",separator:"cell","wrap-cells":"",onRequest:u(Ne),onSelection:R},{top:d(W=>[y(Ba,{dynamicColumns:w.value,"onUpdate:dynamicColumns":E[0]||(E[0]=te=>w.value=te),grid:b.value,"onUpdate:grid":E[1]||(E[1]=te=>b.value=te),isFullscreen:m.value,"onUpdate:isFullscreen":E[2]||(E[2]=te=>m.value=te),columns:u(g),gridBtn:!u(S),multiColumn:u(x),props:W,refreshBtn:u(P),rightBtn:u(M),searchBtn:u(T),onRefresh:u(Ne)},we({menuLeft:d(()=>{var te,he,ue,Ee,Ze,Xe,Le;return[J(V.$slots,"menuLeft",{selected:F.value}),(te=e.option)!=null&&te.export?(p(),U(le,{key:0,columns:u(g),data:s.value,exportMethod:(he=u(c))==null?void 0:he.dicMethod,exportQuery:(ue=u(c))==null?void 0:ue.params,exportText:(Ee=e.option)==null?void 0:Ee.exportText,exportUrl:(Ze=u(c))==null?void 0:Ze.dicUrl,fileName:e.fileName,isFormat:(Xe=e.option)==null?void 0:Xe.isFormat,isStream:(Le=e.option)==null?void 0:Le.isStream},null,8,["columns","data","exportMethod","exportQuery","exportText","exportUrl","fileName","isFormat","isStream"])):Y("",!0)]}),menuRight:d(te=>[J(V.$slots,"menuRight",{btnAttr:te,props:W})]),_:2},[u(i).top?{name:"top",fn:d(()=>[J(V.$slots,"top",{props:W}),y(bt)]),key:"0"}:void 0]),1032,["dynamicColumns","grid","isFullscreen","columns","gridBtn","multiColumn","props","refreshBtn","rightBtn","searchBtn","onRefresh"])]),header:d(W=>[(p(!0),A(ae,null,me(u(x),(te,he)=>(p(),U(Ta,{key:he,fixedObj:C.value,"onUpdate:fixedObj":E[3]||(E[3]=ue=>C.value=ue),columns:te,"header-cell-click":e.headerCellClick,"header-click":e.headerClick,index:he,props:W,selection:u(Q)},we({selection:d(()=>[y(st,{modelValue:W.selected,"onUpdate:modelValue":ue=>W.selected=ue,dense:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},[me(u(H)(te,"H"),ue=>({name:u(B)(ue),fn:d(()=>[J(V.$slots,u(B)(ue))])}))]),1032,["fixedObj","columns","header-cell-click","header-click","index","props","selection"]))),128))]),body:d(W=>{var te,he;return[y(Va,{fixedObj:C.value,"onUpdate:fixedObj":E[4]||(E[4]=ue=>C.value=ue),"cell-click":e.cellClick,"child-key":(te=e.option)==null?void 0:te.childKey,"merge-cells":e.mergeCells,props:W,"row-click":e.rowClick,"row-cls":e.rowCls,selection:u(Q),"tree-node":(he=e.option)==null?void 0:he.treeNode,onToggleExpand:xt},we({selection:d(()=>[y(st,{modelValue:W.selected,"onUpdate:modelValue":ue=>W.selected=ue,dense:""},null,8,["modelValue","onUpdate:modelValue"])]),menu:d(()=>[J(V.$slots,"menu",{index:W.rowIndex,row:W.row})]),_:2},[me(u(H)(W.cols),ue=>({name:ue.field,fn:d(()=>[ue.slot?J(V.$slots,ue.field,{key:0,index:W.rowIndex,row:W.row}):Y("",!0)])}))]),1032,["fixedObj","cell-click","child-key","merge-cells","props","row-click","row-cls","selection","tree-node"])]}),item:d(W=>{var te,he;return[y(wa,{"cell-click":e.cellClick,"child-key":(te=e.option)==null?void 0:te.childKey,"header-cell-click":e.headerCellClick,"header-click":e.headerClick,props:W,"row-click":e.rowClick,"row-cls":e.rowCls,selection:u(Q),"tree-node":(he=e.option)==null?void 0:he.treeNode,onToggleExpand:xt},we({selection:d(()=>[y(st,{modelValue:W.selected,"onUpdate:modelValue":ue=>W.selected=ue,dense:""},null,8,["modelValue","onUpdate:modelValue"])]),menu:d(()=>[J(V.$slots,"menu",{index:W.rowIndex,row:W.row})]),_:2},[me(u(H)(W.cols),ue=>({name:ue.field,fn:d(()=>[ue.slot?J(V.$slots,ue.field,{key:0,index:W.rowIndex,row:W.row}):Y("",!0)])}))]),1032,["cell-click","child-key","header-cell-click","header-click","props","row-click","row-cls","selection","tree-node"])]}),"no-data":d(({icon:W,message:te})=>[re("div",La,[re("div",Oa,[y(be,{name:W,size:"1.5rem"},null,8,["name"]),X(" "+z(te),1)])])]),loading:d(()=>[y(Qe,{showing:""},{default:d(()=>[y(We,{color:"primary",size:"3em"})]),_:1})]),bottom:d(()=>[re("div",Fa,[re("div",Ea,[F.value.length?(p(),A("span",Pa,[X(z(V.$t("SelectedTips",[F.value.length]))+" ",1),y(ie,{label:V.$t("Empty"),color:"primary",flat:"",padding:"0",onClick:q},null,8,["label"])])):Y("",!0),J(V.$slots,"bottomLeft")]),u(_)?(p(),A("div",Ma,[re("span",Ia,z(V.$t("Totals"))+": "+z(r.value.rowsNumber||0),1),y(xl,Z({modelValue:r.value.rowsPerPage,"onUpdate:modelValue":E[5]||(E[5]=W=>r.value.rowsPerPage=W)},G,{"onUpdate:modelValue":E[6]||(E[6]=W=>u(Ne)())}),null,16,["modelValue"]),y(en,{modelValue:r.value.page,"onUpdate:modelValue":[E[7]||(E[7]=W=>r.value.page=W),E[8]||(E[8]=W=>u(Ne)())],max:u(D),"max-pages":6},null,8,["modelValue","max"])])):Y("",!0)])]),_:3},8,["expanded","pagination","selected","class","columns","grid","hide-bottom","loading","row-key","rows","selection","style","virtual-scroll","virtual-scroll-sticky-size-start","visible-columns","onRequest"])}}};var Ua=Object.freeze(Object.defineProperty({__proto__:null,default:Xt},Symbol.toStringTag,{value:"Module"}));const za=["none","strict","leaf","leaf-filtered"];var ml=nn({name:"QTree",props:{...an,nodes:{type:Array,required:!0},nodeKey:{type:String,required:!0},labelKey:{type:String,default:"label"},childrenKey:{type:String,default:"children"},dense:Boolean,color:String,controlColor:String,textColor:String,selectedColor:String,icon:String,tickStrategy:{type:String,default:"none",validator:e=>za.includes(e)},ticked:Array,expanded:Array,selected:{},noSelectionUnset:Boolean,defaultExpandAll:Boolean,accordion:Boolean,filter:String,filterMethod:Function,duration:Number,noConnectors:Boolean,noTransition:Boolean,noNodesLabel:String,noResultsLabel:String},emits:["update:expanded","update:ticked","update:selected","lazy-load","after-show","after-hide"],setup(e,{slots:l,emit:t}){const{proxy:n}=bn(),{$q:o}=n,i=rn(e,o),a=j({}),s=j(e.ticked||[]),v=j(e.expanded||[]);let C={};yn(()=>{C={}});const w=h(()=>`q-tree q-tree--${e.dense===!0?"dense":"standard"}`+(e.noConnectors===!0?" q-tree--no-connectors":"")+(i.value===!0?" q-tree--dark":"")+(e.color!==void 0?` text-${e.color}`:"")),x=h(()=>e.selected!==void 0),g=h(()=>e.icon||o.iconSet.tree.icon),b=h(()=>e.controlColor||e.color),$=h(()=>e.textColor!==void 0?` text-${e.textColor}`:""),m=h(()=>{const O=e.selectedColor||e.color;return O?` text-${O}`:""}),S=h(()=>e.filterMethod!==void 0?e.filterMethod:(O,G)=>{const q=G.toLowerCase();return O[e.labelKey]&&O[e.labelKey].toLowerCase().indexOf(q)>-1}),f=h(()=>{const O={},G=(q,V)=>{const E=q.tickStrategy||(V?V.tickStrategy:e.tickStrategy),le=q[e.nodeKey],oe=q[e.childrenKey]&&q[e.childrenKey].length>0,W=q.disabled!==!0&&x.value===!0&&q.selectable!==!1,te=q.disabled!==!0&&q.expandable!==!1,he=E!=="none",ue=E==="strict",Ee=E==="leaf-filtered",Ze=E==="leaf"||E==="leaf-filtered";let Xe=q.disabled!==!0&&q.tickable!==!1;Ze===!0&&Xe===!0&&V&&V.tickable!==!0&&(Xe=!1);let Le=q.lazy;Le===!0&&a.value[le]!==void 0&&Array.isArray(q[e.childrenKey])===!0&&(Le=a.value[le]);const de={key:le,parent:V,isParent:oe,lazy:Le,disabled:q.disabled,link:q.disabled!==!0&&(W===!0||te===!0&&(oe===!0||Le===!0)),children:[],matchesFilter:e.filter?S.value(q,e.filter):!0,selected:le===e.selected&&W===!0,selectable:W,expanded:oe===!0?v.value.includes(le):!1,expandable:te,noTick:q.noTick===!0||ue!==!0&&Le&&Le!=="loaded",tickable:Xe,tickStrategy:E,hasTicking:he,strictTicking:ue,leafFilteredTicking:Ee,leafTicking:Ze,ticked:ue===!0?s.value.includes(le):oe===!0?!1:s.value.includes(le)};if(O[le]=de,oe===!0&&(de.children=q[e.childrenKey].map(ye=>G(ye,de)),e.filter&&(de.matchesFilter!==!0?de.matchesFilter=de.children.some(ye=>ye.matchesFilter):de.noTick!==!0&&de.disabled!==!0&&de.tickable===!0&&Ee===!0&&de.children.every(ye=>ye.matchesFilter!==!0||ye.noTick===!0||ye.tickable!==!0)===!0&&(de.tickable=!1)),de.matchesFilter===!0&&(de.noTick!==!0&&ue!==!0&&de.children.every(ye=>ye.noTick)===!0&&(de.noTick=!0),Ze))){if(de.ticked=!1,de.indeterminate=de.children.some(ye=>ye.indeterminate===!0),de.tickable=de.tickable===!0&&de.children.some(ye=>ye.tickable),de.indeterminate!==!0){const ye=de.children.reduce((el,Dl)=>Dl.ticked===!0?el+1:el,0);ye===de.children.length?de.ticked=!0:ye>0&&(de.indeterminate=!0)}de.indeterminate===!0&&(de.indeterminateNextState=de.children.every(ye=>ye.tickable!==!0||ye.ticked!==!0))}return de};return e.nodes.forEach(q=>G(q,null)),O});se(()=>e.ticked,O=>{s.value=O}),se(()=>e.expanded,O=>{v.value=O});function T(O){const G=[].reduce,q=(V,E)=>{if(V||!E)return V;if(Array.isArray(E)===!0)return G.call(Object(E),q,V);if(E[e.nodeKey]===O)return E;if(E[e.childrenKey])return q(null,E[e.childrenKey])};return q(null,e.nodes)}function P(){return s.value.map(O=>T(O))}function M(){return v.value.map(O=>T(O))}function I(O){return O&&f.value[O]?f.value[O].expanded:!1}function c(){e.expanded!==void 0?t("update:expanded",[]):v.value=[]}function _(){const O=v.value,G=q=>{q[e.childrenKey]&&q[e.childrenKey].length>0&&q.expandable!==!1&&q.disabled!==!0&&(O.push(q[e.nodeKey]),q[e.childrenKey].forEach(G))};e.nodes.forEach(G),e.expanded!==void 0?t("update:expanded",O):v.value=O}function r(O,G,q=T(O),V=f.value[O]){if(V.lazy&&V.lazy!=="loaded"){if(V.lazy==="loading")return;a.value[O]="loading",Array.isArray(q[e.childrenKey])!==!0&&(q[e.childrenKey]=[]),t("lazy-load",{node:q,key:O,done:E=>{a.value[O]="loaded",q[e.childrenKey]=Array.isArray(E)===!0?E:[],ve(()=>{const le=f.value[O];le&&le.isParent===!0&&D(O,!0)})},fail:()=>{delete a.value[O],q[e.childrenKey].length===0&&delete q[e.childrenKey]}})}else V.isParent===!0&&V.expandable===!0&&D(O,G)}function D(O,G){let q=v.value;const V=e.expanded!==void 0;if(V===!0&&(q=q.slice()),G){if(e.accordion&&f.value[O]){const E=[];f.value[O].parent?f.value[O].parent.children.forEach(le=>{le.key!==O&&le.expandable===!0&&E.push(le.key)}):e.nodes.forEach(le=>{const oe=le[e.nodeKey];oe!==O&&E.push(oe)}),E.length>0&&(q=q.filter(le=>E.includes(le)===!1))}q=q.concat([O]).filter((E,le,oe)=>oe.indexOf(E)===le)}else q=q.filter(E=>E!==O);V===!0?t("update:expanded",q):v.value=q}function F(O){return O&&f.value[O]?f.value[O].ticked:!1}function Q(O,G){let q=s.value;const V=e.ticked!==void 0;V===!0&&(q=q.slice()),G?q=q.concat(O).filter((E,le,oe)=>oe.indexOf(E)===le):q=q.filter(E=>O.includes(E)===!1),V===!0&&t("update:ticked",q)}function L(O,G,q){const V={tree:n,node:O,key:q,color:e.color,dark:i.value};return nl(V,"expanded",()=>G.expanded,E=>{E!==G.expanded&&r(q,E)}),nl(V,"ticked",()=>G.ticked,E=>{E!==G.ticked&&Q([q],E)}),V}function R(O){return(e.filter?O.filter(G=>f.value[G[e.nodeKey]].matchesFilter):O).map(G=>H(G))}function N(O){if(O.icon!==void 0)return ge(be,{class:"q-tree__icon q-mr-sm",name:O.icon,color:O.iconColor});const G=O.img||O.avatar;if(G)return ge("img",{class:`q-tree__${O.img?"img":"avatar"} q-mr-sm`,src:G})}function k(){t("after-show")}function B(){t("after-hide")}function H(O){const G=O[e.nodeKey],q=f.value[G],V=O.header&&l[`header-${O.header}`]||l["default-header"],E=q.isParent===!0?R(O[e.childrenKey]):[],le=E.length>0||q.lazy&&q.lazy!=="loaded";let oe=O.body&&l[`body-${O.body}`]||l["default-body"];const W=V!==void 0||oe!==void 0?L(O,q,G):null;return oe!==void 0&&(oe=ge("div",{class:"q-tree__node-body relative-position"},[ge("div",{class:$.value},[oe(W)])])),ge("div",{key:G,class:`q-tree__node relative-position q-tree__node--${le===!0?"parent":"child"}`},[ge("div",{class:"q-tree__node-header relative-position row no-wrap items-center"+(q.link===!0?" q-tree__node--link q-hoverable q-focusable":"")+(q.selected===!0?" q-tree__node--selected":"")+(q.disabled===!0?" q-tree__node--disabled":""),tabindex:q.link===!0?0:-1,onClick:te=>{$e(O,q,te)},onKeypress(te){on(te)!==!0&&(te.keyCode===13?$e(O,q,te,!0):te.keyCode===32&&Ne(O,q,te,!0))}},[ge("div",{class:"q-focus-helper",tabindex:-1,ref:te=>{C[q.key]=te}}),q.lazy==="loading"?ge(Sl,{class:"q-tree__spinner",color:b.value}):le===!0?ge(be,{class:"q-tree__arrow"+(q.expanded===!0?" q-tree__arrow--rotate":""),name:g.value,onClick(te){Ne(O,q,te)}}):null,q.hasTicking===!0&&q.noTick!==!0?ge(st,{class:"q-tree__tickbox",modelValue:q.indeterminate===!0?null:q.ticked,color:b.value,dark:i.value,dense:!0,keepColor:!0,disable:q.tickable!==!0,onKeydown:ll,"onUpdate:modelValue":te=>{xt(q,te)}}):null,ge("div",{class:"q-tree__node-header-content col row no-wrap items-center"+(q.selected===!0?m.value:$.value)},[V?V(W):[N(O),ge("div",O[e.labelKey])]])]),le===!0?e.noTransition===!0?ge("div",{class:"q-tree__node-collapsible"+$.value,key:`${G}__q`},[oe,ge("div",{class:"q-tree__children"+(q.disabled===!0?" q-tree__node--disabled":"")},q.expanded?E:null)]):ge(kl,{duration:e.duration,onShow:k,onHide:B},()=>He(ge("div",{class:"q-tree__node-collapsible"+$.value,key:`${G}__q`},[oe,ge("div",{class:"q-tree__children"+(q.disabled===!0?" q-tree__node--disabled":"")},E)]),[[Rt,q.expanded]])):oe])}function ce(O){const G=C[O];G&&G.focus()}function $e(O,G,q,V){V!==!0&&ce(G.key),x.value&&G.selectable?e.noSelectionUnset===!1?t("update:selected",G.key!==e.selected?G.key:null):G.key!==e.selected&&t("update:selected",G.key===void 0?null:G.key):Ne(O,G,q,V),typeof O.handler=="function"&&O.handler(O)}function Ne(O,G,q,V){q!==void 0&&ll(q),V!==!0&&ce(G.key),r(G.key,!G.expanded,O,G)}function xt(O,G){if(O.indeterminate===!0&&(G=O.indeterminateNextState),O.strictTicking)Q([O.key],G);else if(O.leafTicking){const q=[],V=E=>{E.isParent?(G!==!0&&E.noTick!==!0&&E.tickable===!0&&q.push(E.key),E.leafTicking===!0&&E.children.forEach(V)):E.noTick!==!0&&E.tickable===!0&&(E.leafFilteredTicking!==!0||E.matchesFilter===!0)&&q.push(E.key)};V(O),Q(q,G)}}return e.defaultExpandAll===!0&&_(),Object.assign(n,{getNodeByKey:T,getTickedNodes:P,getExpandedNodes:M,isExpanded:I,collapseAll:c,expandAll:_,setExpanded:r,isTicked:F,setTicked:Q,meta:f}),()=>{const O=R(e.nodes);return ge("div",{class:w.value},O.length===0?e.filter?e.noResultsLabel||o.lang.tree.noResults:e.noNodesLabel||o.lang.tree.noNodes:O)}}});const Qa={class:"shadow-2 rounded-borders q-pa-sm qx-tree"},Aa={class:"qx-tree-title"},Da={__name:"QxTree",props:{field:String,props:Object,options:Array,dicUrl:String,rowInfo:Object,dicQuery:Object,change:Function,showWay:Boolean,loading:Boolean,strategy:String,multiple:Boolean,dicMethods:String,filterMethod:Function,noSelectionUnset:Boolean,modelValue:[String,Array]},emits:["change","getNodes","update:modelValue","update:loading"],setup(e,{expose:l,emit:t}){const n=e;Vl(N=>({"56775e94":T.value.height}));const{height:o}=Me,i=j(""),a=j(null),s=j(n.strategy||"leaf"),v=h(()=>[{label:`${ee.t("CheckWayTip1")}`,value:"strict"},{label:`${ee.t("CheckWayTip2")}`,value:"leaf"},{label:`${ee.t("CheckWayTip3")}`,value:"leaf-filtered"}]),C=h(()=>({clearable:!0,dense:!0,placeholder:ee.t("FilterKeywords"),outlined:!0})),w=De({class:"qx-tree-group",dense:!0,inline:!0}),x=h(()=>{const{label:N="label",key:k="id",children:B="children"}=n.props||{};return{accordion:!0,childrenKey:B,labelKey:N,nodeKey:k,filter:i.value,noSelectionUnset:n.noSelectionUnset}}),g=Fe(),b=j([]),$=j(""),m=j([]),S=j([]),f=j(!1),T=j({height:"calc(100% - 40px)"}),P=()=>{ve(()=>{if(!a.value)return;const N=a.value.$el.querySelector(".qx-tree-title"),k=a.value.$el.querySelector(".qx-tree-group");if(!N&&!k){let H=40;g["tree-top"]&&(H+=43),n.multiple&&n.showWay&&(H+=31),T.value={height:`calc(100% - ${Math.floor(H)}px)`};return}let B=44;N&&(B+=o(N)),k&&(B+=o(k)),T.value={height:`calc(100% - ${Math.floor(B)}px)`}})},M=()=>{ve(()=>{if(!n.multiple&&a.value){const N=a.value.getNodeByKey($.value);if(N){m.value=(N.parentIds||"").split(",");return}}S.value.length&&!m.value.length&&(m.value=[S.value[0][x.value.nodeKey]])})},I=()=>{if(n.multiple){if(n.modelValue===b.value&&m.value.length)return;b.value=n.modelValue||[],M();return}n.modelValue===$.value&&m.value.length||($.value=n.modelValue||"",M())},c=()=>{if(n.dicUrl){f.value=!0;const N=Te(n.dicQuery||{});_.value(n.dicUrl,N,k=>{S.value=k.rows||k,f.value=!1,t("update:loading",f.value),I()},()=>{f.value=!1,t("update:loading",f.value)});return}n.loading&&(f.value=n.loading),S.value=Te(n.options||[]),I()};se(fe(n,"modelValue"),()=>I()),se([fe(n,"options"),fe(n,"dicQuery")],()=>{c()},{immediate:!0}),se(fe(n,"loading"),()=>{f.value=n.loading});const _=h(()=>n.dicMethods==="get"?Bt:Ye),r=fe(n,"rowInfo"),D=N=>{!r.value||(n.multiple?r.value[`SSS_${n.field}`]=N.map(k=>k[x.value.labelKey]).join(","):r.value[`SSS_${n.field}`]=N[x.value.labelKey])},F=N=>{if(s.value==="strict"){ve(()=>{const k=a.value.getTickedNodes();k&&D(k),t("update:modelValue",N),n.change?n.change(N,k):t("change",N,k)});return}ve(()=>{const k=Object.values(a.value.meta.value),B=[],H=[];for(const ce of k)(ce.ticked||ce.indeterminate)&&(B.push(a.value.getNodeByKey(ce.key)),H.push(ce.key));b.value=H,B&&D(B),t("update:modelValue",H),n.change?n.change(H,B):t("change",H,B)})},Q=N=>{ve(()=>{const k=a.value.getNodeByKey(N);k&&D(k),t("update:modelValue",N),n.change?n.change(N,k):t("change",N,k)})},L=()=>{f.value=!1,t("update:loading",f.value)};return l({getNodes:()=>{f.value=!0,s.value="strict",ve(()=>{const N=a.value.getTickedNodes();t("getNodes",N,L)})},updateSelected:Q,updateTicked:F}),(N,k)=>(p(),A("div",Qa,[re("div",Aa,[J(N.$slots,"tree-top",{},void 0,!0),u(g)["tree-top"]&&!(e.multiple&&e.showWay)?(p(),U(Vt,{key:0,onResize:P})):Y("",!0)]),y(Ct,Z({modelValue:i.value,"onUpdate:modelValue":k[0]||(k[0]=B=>i.value=B)},u(C)),null,16,["modelValue"]),e.multiple&&e.showWay?(p(),A(ae,{key:0},[y(Qt,Z({modelValue:s.value,"onUpdate:modelValue":k[1]||(k[1]=B=>s.value=B),options:u(v)},w),null,16,["modelValue","options"]),y(Vt,{onResize:P})],64)):Y("",!0),e.multiple?(p(),U(u(ml),Z({key:1,ref_key:"QxTree",ref:a,expanded:m.value,"onUpdate:expanded":k[2]||(k[2]=B=>m.value=B),ticked:b.value,"onUpdate:ticked":k[3]||(k[3]=B=>b.value=B),"filter-method":e.filterMethod,nodes:S.value,"tick-strategy":s.value},u(x),{"onUpdate:ticked":F}),we({_:2},[u(g).header?{name:"default-header",fn:d(B=>[J(N.$slots,"header",{prop:B},void 0,!0)]),key:"0"}:void 0,u(g).body?{name:"default-body",fn:d(B=>[J(N.$slots,"body",{prop:B},void 0,!0)]),key:"1"}:void 0]),1040,["expanded","ticked","filter-method","nodes","tick-strategy"])):(p(),U(u(ml),Z({key:2,ref_key:"QxTree",ref:a,expanded:m.value,"onUpdate:expanded":k[4]||(k[4]=B=>m.value=B),selected:$.value,"onUpdate:selected":k[5]||(k[5]=B=>$.value=B),"filter-method":e.filterMethod,nodes:S.value,"selected-color":"primary"},u(x),{"onUpdate:selected":Q}),we({_:2},[u(g).header?{name:"default-header",fn:d(B=>[J(N.$slots,"header",{prop:B},void 0,!0)]),key:"0"}:void 0,u(g).body?{name:"default-body",fn:d(B=>[J(N.$slots,"body",{prop:B},void 0,!0)]),key:"1"}:void 0]),1040,["expanded","selected","filter-method","nodes"])),y(Qe,{showing:f.value},{default:d(()=>[y(We,{color:"primary",size:"50px"})]),_:1},8,["showing"])]))}};var Il=Ol(Da,[["__scopeId","data-v-21b50de4"]]),Ra=Object.freeze(Object.defineProperty({__proto__:null,default:Il},Symbol.toStringTag,{value:"Module"}));const Ha={__name:"QGroup",props:{type:{type:String,default:"radio"},options:Array,allBtn:Boolean,single:Boolean,change:Function,outlined:Boolean,readonly:Boolean,modelValue:[String,Number,Array]},emits:["change","update:modelValue"],setup(e,{emit:l}){const t=e,n=j(!1),o=j(void 0),i=h(()=>t.type==="radio"),a=h(()=>{var x;return!i.value&&!t.single&&t.allBtn&&((x=t.options)==null?void 0:x.length)}),s=(x=[],g=[])=>{!a.value||((g==null?void 0:g.length)===(x==null?void 0:x.length)?n.value=!0:(x==null?void 0:x.length)===0?n.value=!1:n.value=null)},v=()=>{if(s(t.modelValue,t.options),!(o.value===t.modelValue&&t.modelValue)){if(t.modelValue){o.value=t.modelValue;return}i.value?o.value="":o.value=[]}};se(fe(t,"modelValue"),()=>v(),{immediate:!0});const C=x=>{if(!x)return w([]);const g=(t.options||[]).map(b=>b.value);w(g)},w=x=>{t.single&&x.length>1&&(x=[x[1]]),t.change?t.change(x):l("change",x),s(x,t.options),l("update:modelValue",x)};return(x,g)=>(p(),U(Oe,{modelValue:o.value,"onUpdate:modelValue":g[2]||(g[2]=b=>o.value=b),borderless:"","no-error-icon":""},we({control:d(({id:b})=>[u(a)?(p(),U(st,Z({key:0,modelValue:n.value,"onUpdate:modelValue":g[0]||(g[0]=$=>n.value=$),label:x.$t("CheckAll"),class:"q-group-selected-all"},x.$attrs,{"onUpdate:modelValue":C}),null,16,["modelValue","label"])):Y("",!0),y(Qt,Z({id:b,modelValue:o.value,"onUpdate:modelValue":g[1]||(g[1]=$=>o.value=$),disable:e.readonly,options:e.options,type:e.type},x.$attrs,{"onUpdate:modelValue":w}),null,16,["id","modelValue","disable","options","type"])]),_:2},[me(Object.keys(Fe()),b=>({name:b,fn:d(()=>[J(x.$slots,b)])}))]),1032,["modelValue"]))}};var Wa=Object.freeze(Object.defineProperty({__proto__:null,default:Ha},Symbol.toStringTag,{value:"Module"}));const Ka={key:0,class:"placeholder"},Ga={key:1},Ya={class:"full-width row justify-around items-start"},Za={class:"q-month--view q-date__months-content col self-stretch justify-around row items-center"},Xa={__name:"QMonth",props:{type:String,clearable:{type:Boolean,default:!0},multiple:Boolean,placeholder:String,option:[Array,Function],lazyRules:[Boolean,String],modelValue:[String,Date,Array,Number,Object]},emits:["change","update:modelValue"],setup(e,{emit:l}){const t=e,n=new Date().getFullYear(),o=xe("BgToColor"),i=j(null),a=j(void 0),s=j(!1),v=h(()=>s.value?"q-field--focused q-field--highlighted":""),C=De({class:"col-2",dense:!0,flat:!0}),w=j(0),x=L=>+L.replace("-",""),g=h(()=>{const L=+it.formatDate(new Date,"YYYYMM");return R=>{const N=`${$.value}-${ut.pad(R,2)}`,k=x(N);if(K(a.value))return k===L?"text-bold text-primary":void 0;if(ne(a.value)==="array")return a.value.includes(N)?`bg-primary text-bold text-${o("primary")}`:void 0;if(ne(a.value)==="object"){if(w.value){const B=x(a.value.from);return B===k?B<w.value?"text-primary q-month__start_hover_month q-month__hover_month q-month__start_month":B>w.value?"text-primary q-month__end_hover_month q-month__hover_month q-month__end_month":"text-primary q-month__hover_month":B<k?k<w.value?"text-primary no-border-radius q-month__hover_month":k===w.value?"text-primary q-month__end_hover_month q-month__hover_month q-month__end_month":void 0:k>w.value?"text-primary no-border-radius q-month__hover_month":k===w.value?"text-primary q-month__start_hover_month q-month__hover_month q-month__start_month":void 0}if(a.value.from&&a.value.to){const B=x(a.value.from),H=x(a.value.to);if(B===k&&H===k)return`bg-primary text-bold text-${o("primary")}`;if(B===k)return`bg-primary text-bold text-${o("primary")} q-month__start_month`;if(H===k)return`bg-primary text-bold text-${o("primary")} q-month__end_month`;if(k>B&&k<H)return"no-border-radius q-month__range"}}if(a.value===N)return`bg-primary text-bold text-${o("primary")}`;if(k===L)return"text-primary text-bold"}}),b=L=>+it.formatDate(L,"YYYY"),$=j(n),m=h(()=>t.multiple?!1:(t.type||"").includes("range")),S=h(()=>K(a.value)?"":ne(a.value)==="array"?a.value.join(", "):ne(a.value)==="object"?`${a.value.from||"NA"}/${a.value.to||"NA"}`:a.value),f=()=>{$.value-=1},T=()=>{$.value+=1},P=()=>{if(K(a.value)){$.value=n;return}if(ne(a.value)==="array"){$.value=b(a.value[0]);return}if(ne(a.value)==="object"){$.value=b(a.value.from);return}$.value=b(a.value)},M=()=>{if(a.value!==t.modelValue){if(K(t.modelValue)){a.value=void 0;return}if(ne(t.modelValue)==="date"){a.value=it.formatDate(new Date(t.modelValue),"YYYY-MM");return}a.value=t.modelValue}};se(fe(t,"modelValue"),()=>{M()},{immediate:!0});const I=()=>{m.value&&a.value&&!a.value.to&&(a.value=void 0),i.value&&i.value.blur()},c=()=>{l("update:modelValue",a.value||""),t.lazyRules!=="ondemand"&&i.value&&i.value.validate()},_=()=>{s.value=!s.value,s.value&&P()},r=L=>{!m.value||K(a.value)||ne(a.value)==="object"&&(a.value.to||(w.value=x(`${$.value}-${ut.pad(L,2)}`)))},D=L=>{if(L=`${$.value}-${ut.pad(L,2)}`,t.multiple){K(a.value)?a.value=[L]:a.value.push(L),l("change",a.value,L);return}if(m.value){if(K(a.value)||a.value.to){w.value=L,a.value={from:L};return}else L<a.value.from?(a.value.to=a.value.from,a.value.from=L):a.value.to=L,w.value=0,s.value=!1,l("change",a.value,L);return}a.value=L,s.value=!1,l("change",L)},F=()=>{if(!s.value||!i.value)return;const L=i.value.$el.getBoundingClientRect(),R=window.innerHeight;(L.top>R||L.bottom<0)&&(s.value=!1)},Q=()=>{s.value=!1};return Ke(()=>{window.addEventListener("scroll",F,!0),window.addEventListener("resize",Q,!1)}),_t(()=>{window.removeEventListener("scroll",F,!0),window.removeEventListener("resize",Q,!1)}),(L,R)=>(p(),U(Oe,Z({ref_key:"QMonth",ref:i,modelValue:a.value,"onUpdate:modelValue":R[1]||(R[1]=N=>a.value=N),autogrow:!1,class:u(v),clearable:e.clearable,"lazy-rules":"ondemand"},L.$attrs,{onFocus:_}),{control:d(()=>[u(S)?L.$attrs.readonly?(p(),A("span",Ga,z(u(S)),1)):(p(),U(Be,{key:2},{default:d(()=>[X(z(u(S)),1)]),_:1})):(p(),A("span",Ka,z(e.placeholder),1))]),append:d(()=>[y(be,{name:"calendar_month"})]),default:d(()=>[y(at,{modelValue:s.value,"onUpdate:modelValue":R[0]||(R[0]=N=>s.value=N),offset:[0,5],anchor:"bottom left",breakpoint:"0",class:"q-month column justify-around items-start","no-parent-event":"","no-refocus":"",self:"top left","transition-hide":"jump-up","transition-show":"jump-down",onHide:c,onBeforeHide:I},{default:d(()=>[re("div",Ya,[y(ie,{dense:"",flat:"",icon:"chevron_left",round:"",onClick:f}),y(ie,{dense:"",flat:""},{default:d(()=>[X(z($.value),1)]),_:1}),y(ie,{dense:"",flat:"",icon:"chevron_right",round:"",onClick:T})]),re("div",Za,[(p(),A(ae,null,me(12,N=>y(ie,Z({key:N,class:u(g)(N)},C,{onClick:k=>D(N),onMouseenter:k=>r(N)}),{default:d(()=>[X(z(L.$t(`M${N}`)),1)]),_:2},1040,["class","onClick","onMouseenter"])),64))])]),_:1},8,["modelValue"])]),_:1},16,["modelValue","class","clearable"]))}};var Ja=Object.freeze(Object.defineProperty({__proto__:null,default:Xa},Symbol.toStringTag,{value:"Module"}));const er={__name:"QNumber",props:{rules:Array,input:Function,min:[String,Number],max:[String,Number],decimals:[String,Number],lazyRules:[Boolean,String],modelValue:[String,Number]},emits:["update:modelValue"],setup(e,{emit:l}){const t=e,n=j(null),o=j(null),i=h(()=>t.lazyRules===!0?!1:t.lazyRules),a=h(()=>{if(t.decimals>=0)return[0,"0"].includes(t.decimals)?/^-?\d+$/:new RegExp(new RegExp("\\.\\d{0,"+t.decimals+"}/?$"))}),s=h(()=>{const w=t.rules||[];return K(t.min)||w.push(x=>K(x)||x>=t.min||ee.t("NotLess",[t.min])),K(t.max)||w.push(x=>K(x)||x<=t.max||ee.t("NotGreater",[t.max])),a.value&&w.push(x=>K(x)||/^-?\d+$/.test(x)||a.value.test(x)||ee.t("DecimalDigits",[t.decimals])),w}),v=()=>{t.modelValue!==o.value&&(o.value=t.modelValue,ve(()=>{n.value&&n.value.resetValidation()}))};se(fe(t,"modelValue"),()=>v(),{immediate:!0});const C=(w="")=>{t.input&&typeof t.input=="function"&&t.input(w),l("update:modelValue",w)};return(w,x)=>(p(),U(Ct,Z({ref_key:"QNumber",ref:n,modelValue:o.value,"onUpdate:modelValue":x[0]||(x[0]=g=>o.value=g),modelModifiers:{number:!0},"lazy-rules":u(i),rules:u(s),step:"any",title:"",type:"number"},w.$attrs,{"onUpdate:modelValue":C}),we({_:2},[me(Object.keys(Fe()),g=>({name:g,fn:d(()=>[J(w.$slots,g)])}))]),1040,["modelValue","lazy-rules","rules"]))}};var tr=Object.freeze(Object.defineProperty({__proto__:null,default:er},Symbol.toStringTag,{value:"Module"}));const lr={key:0,class:"placeholder"},nr={key:1},ar={__name:"QSelectTree",props:{type:String,props:Object,field:String,dicUrl:String,options:Array,rowInfo:Object,clearable:{type:Boolean,default:!0},change:Function,dicQuery:Object,multiple:Boolean,dicMethods:String,placeholder:String,lazyRules:[Boolean,String],modelValue:[String,Object,Number,Array]},emits:["change","update:modelValue"],setup(e,{emit:l}){const t=e,n=j(null),o=j(null),i=j(void 0),a=j(""),s=h(()=>{const{label:P="label"}=t.props||{};return P}),v=j(!1),C=h(()=>{const P=Te(t);return P.noSelectionUnset=!0,delete P.type,delete P.change,delete P.placeholder,delete P.modelValue,P}),w=fe(t,"rowInfo"),x=()=>{w.value&&(w.value[`SSS_${t.field}`]=a.value)},g=()=>{if(i.value===t.modelValue){x();return}if(K(t.modelValue)){i.value=t.multiple?[]:"",S("",i.value);return}v.value||(v.value=!0),ve(()=>{o.value&&(t.multiple?(o.value.updateTicked(t.modelValue),v.value=!1):o.value.updateSelected(t.modelValue)),x()}),i.value=t.modelValue};se(fe(t,"modelValue"),()=>g(),{immediate:!0});const b=()=>{v.value=!v.value},$=()=>{n.value&&n.value.blur()},m=()=>{l("update:modelValue",i.value||""),t.lazyRules!=="ondemand"&&n.value&&n.value.validate()},S=(P,M)=>{K(M)?a.value="":t.multiple?a.value=M.map(I=>I[s.value]).join(", "):a.value=M[s.value],t.multiple||(v.value=!1),t.change?t.change(P,M):l("change",P,M)},f=()=>{if(!v.value||!n.value)return;const P=n.value.$el.getBoundingClientRect(),M=window.innerHeight;(P.top>M||P.bottom<0)&&(v.value=!1)},T=()=>{v.value=!1};return Ke(()=>{window.addEventListener("scroll",f,!0),window.addEventListener("resize",T,!1)}),_t(()=>{window.removeEventListener("scroll",f,!0),window.removeEventListener("resize",T,!1)}),(P,M)=>(p(),U(Oe,Z({ref_key:"selectTree",ref:n,modelValue:i.value,"onUpdate:modelValue":M[2]||(M[2]=I=>i.value=I),clearable:e.clearable,"lazy-rules":"ondemand"},P.$attrs,{onFocus:b}),we({control:d(()=>[a.value?P.$attrs.readonly?(p(),A("span",nr,z(a.value),1)):(p(),U(Be,{key:2},{default:d(()=>[X(z(a.value),1)]),_:1})):(p(),A("span",lr,z(e.placeholder),1))]),default:d(()=>[y(at,{modelValue:v.value,"onUpdate:modelValue":M[1]||(M[1]=I=>v.value=I),offset:[0,5],anchor:"bottom left",breakpoint:"0",fit:"","no-parent-event":"","no-refocus":"",self:"top left","transition-hide":"jump-up","transition-show":"jump-down",onHide:m,onBeforeHide:$},{default:d(()=>[y(Il,Z({ref_key:"treeRef",ref:o,modelValue:i.value,"onUpdate:modelValue":M[0]||(M[0]=I=>i.value=I)},u(C),{onChange:S}),null,16,["modelValue"])]),_:1},8,["modelValue"])]),_:2},[me(Object.keys(Fe()),I=>({name:I,fn:d(()=>[J(P.$slots,I)])})),P.$attrs.readonly?void 0:{name:"append",fn:d(()=>[y(be,{class:pe([v.value?"rotate-180":"","q-select__dropdown-icon"]),name:"arrow_drop_down"},null,8,["class"])]),key:"0"}]),1040,["modelValue","clearable"]))}};var rr=Object.freeze(Object.defineProperty({__proto__:null,default:ar},Symbol.toStringTag,{value:"Module"}));const or={key:0,class:"placeholder"},ir={key:1},sr={class:"full-height row items-center"},ur={class:"q-year--view q-date__years-content col self-stretch justify-around row items-center"},dr={class:"full-height row items-center"},cr={__name:"QYear",props:{type:String,clearable:{type:Boolean,default:!0},multiple:Boolean,placeholder:String,option:[Array,Function],lazyRules:[Boolean,String],modelValue:[String,Date,Array,Number,Object]},emits:["change","update:modelValue"],setup(e,{emit:l}){const t=e,n=new Date().getFullYear(),o=xe("BgToColor"),i=j(null),a=j(void 0),s=j(!1),v=h(()=>s.value?"q-field--focused q-field--highlighted":""),C=De({class:"col-3",dense:!0,flat:!0}),w=j(0),x=h(()=>Q=>{const L=Number(b.value)+Q;if(K(a.value))return L===n?"text-bold text-primary":void 0;if(ne(a.value)==="array")return a.value.includes(L)||a.value.includes(String(L))?`bg-primary text-bold text-${o("primary")}`:void 0;if(ne(a.value)==="object"){if(w.value){const R=Number(a.value.from);return w.value=+w.value,R===L?R<w.value?"text-primary q-year__start_hover_year q-year__hover_year q-year__start_year":R>w.value?"text-primary q-year__end_hover_year q-year__hover_year q-year__end_year":"text-primary q-year__hover_year":R<L?L<w.value?"text-primary no-border-radius q-year__hover_year":L===w.value?"text-primary q-year__end_hover_year q-year__hover_year q-year__end_year":void 0:L>w.value?"text-primary no-border-radius q-year__hover_year":L===w.value?"text-primary q-year__start_hover_year q-year__hover_year q-year__start_year":void 0}if(a.value.from&&a.value.to){const R=Number(a.value.from),N=Number(a.value.to);if(R===L&&N===L)return`bg-primary text-bold text-${o("primary")}`;if(R===L)return`bg-primary text-bold text-${o("primary")} q-year__start_year`;if(N===L)return`bg-primary text-bold text-${o("primary")} q-year__end_year`;if(L>R&&L<N)return"no-border-radius q-year__range"}}if(Number(a.value)===L)return`bg-primary text-bold text-${o("primary")}`;if(L===n)return"text-primary text-bold"}),g=Q=>Q-Q%20-1,b=j(g(n)),$=h(()=>t.multiple?!1:(t.type||"").includes("range")),m=h(()=>{if(K(a.value))return"";if(ne(a.value)==="array"){if(!$.value)return a.value.join(", ");let Q="";for(const L of a.value)Q+=`${L.from||"NA"}/${L.to||"NA"}, `;return Q.slice(0,-2)}return ne(a.value)==="object"?`${a.value.from||"NA"}/${a.value.to||"NA"}`:a.value}),S=()=>{b.value-=20},f=()=>{b.value+=20},T=()=>{if(K(a.value)){b.value=g(n);return}if(ne(a.value)==="array"){b.value=g(+a.value[0]);return}if(ne(a.value)==="object"){b.value=g(+a.value.from);return}b.value=g(+a.value)},P=()=>{if(a.value!==t.modelValue){if(K(t.modelValue)){a.value=void 0;return}if(ne(t.modelValue)==="date"){a.value=t.modelValue.getFullYear();return}a.value=t.modelValue}};se(fe(t,"modelValue"),()=>{P()},{immediate:!0});const M=()=>{$.value&&a.value&&!a.value.to&&(a.value=void 0),i.value&&i.value.blur()},I=()=>{l("update:modelValue",a.value||""),t.lazyRules!=="ondemand"&&i.value&&i.value.validate()},c=()=>{s.value=!s.value,s.value&&T()},_=Q=>{!$.value||K(a.value)||ne(a.value)==="object"&&(a.value.to||(w.value=+Q.target.textContent))},r=Q=>{const L=Number(b.value)+Q;if(t.multiple){K(a.value)?a.value=[L]:a.value.push(L),l("change",a.value,L);return}if($.value){if(K(a.value)||a.value.to){w.value=L,a.value={from:L};return}else L<a.value.from?(a.value.to=a.value.from,a.value.from=L):a.value.to=L,w.value=0,s.value=!1,l("change",a.value,L);return}a.value=L,s.value=!1,l("change",L)},D=()=>{if(!s.value||!i.value)return;const Q=i.value.$el.getBoundingClientRect(),L=window.innerHeight;(Q.top>L||Q.bottom<0)&&(s.value=!1)},F=()=>{s.value=!1};return Ke(()=>{window.addEventListener("scroll",D,!0),window.addEventListener("resize",F,!1)}),_t(()=>{window.removeEventListener("scroll",D,!0),window.removeEventListener("resize",F,!1)}),(Q,L)=>(p(),U(Oe,Z({ref_key:"QYear",ref:i,modelValue:a.value,"onUpdate:modelValue":L[1]||(L[1]=R=>a.value=R),autogrow:!1,class:u(v),clearable:e.clearable,"lazy-rules":"ondemand"},Q.$attrs,{onFocus:c}),{control:d(()=>[u(m)?Q.$attrs.readonly?(p(),A("span",ir,z(u(m)),1)):(p(),U(Be,{key:2},{default:d(()=>[X(z(u(m)),1)]),_:1})):(p(),A("span",or,z(e.placeholder),1))]),append:d(()=>[y(be,{name:"edit_calendar"})]),default:d(()=>[y(at,{modelValue:s.value,"onUpdate:modelValue":L[0]||(L[0]=R=>s.value=R),offset:[0,5],anchor:"bottom left",breakpoint:"0",class:"q-year row no-wrap justify-around items-start","no-parent-event":"","no-refocus":"",self:"top left","transition-hide":"jump-up","transition-show":"jump-down",onHide:I,onBeforeHide:M},{default:d(()=>[re("div",sr,[y(ie,{dense:"",flat:"",icon:"chevron_left",round:"",onClick:S})]),re("div",ur,[(p(),A(ae,null,me(21,R=>y(ie,Z({key:R,class:u(x)(R)},C,{onClick:N=>r(R),onMouseenter:_}),{default:d(()=>[X(z(b.value+R),1)]),_:2},1040,["class","onClick"])),64))]),re("div",dr,[y(ie,{dense:"",flat:"",icon:"chevron_right",round:"",onClick:f})])]),_:1},8,["modelValue"])]),_:1},16,["modelValue","class","clearable"]))}};var fr=Object.freeze(Object.defineProperty({__proto__:null,default:cr},Symbol.toStringTag,{value:"Module"}));const mr={key:0,class:"placeholder"},pr={key:1},vr={__name:"QxDate",props:{type:String,clearable:{type:Boolean,default:!0},multiple:Boolean,placeholder:String,option:[Array,Function],lazyRules:[Boolean,String],modelValue:[String,Date,Array,Object]},emits:["change","update:modelValue"],setup(e,{emit:l}){const t=e,n=xe("BgToColor"),o=j(null),i=j(void 0),a=j(!1),s=h(()=>a.value?"q-field--focused q-field--highlighted":""),v=h(()=>(t.type||"").includes("time")?"YYYY-MM-DD HH:mm":"YYYY-MM-DD"),C=h(()=>(t.type||"").includes("range")),w=h(()=>{const{multiple:M,option:I}=t,c=!(M||C.value);return{"today-btn":!0,multiple:M,range:C.value,mask:v,noUnset:c,options:I}}),x=h(()=>{if(K(i.value))return"";if(ne(i.value)==="array"){if(!C.value)return i.value.join(", ");let M="";for(const I of i.value)M+=`${I.from||"NA"}/${I.to||"NA"}, `;return M.slice(0,-2)}return ne(i.value)==="object"?`${i.value.from||"NA"}/${i.value.to||"NA"}`:i.value}),g=()=>{if(i.value!==t.modelValue){if(K(t.modelValue)){i.value=void 0;return}i.value=t.modelValue}};se(fe(t,"modelValue"),()=>{g()},{immediate:!0});const b=()=>{o.value&&o.value.blur()},$=()=>{l("update:modelValue",i.value||""),t.lazyRules!=="ondemand"&&o.value&&o.value.validate()},m=()=>{a.value=!a.value},S=M=>{l("change",M),M&&(t.multiple||(a.value=!1))},f=()=>{a.value=!1,$()},T=()=>{if(!a.value||!o.value)return;const M=o.value.$el.getBoundingClientRect(),I=window.innerHeight;(M.top>I||M.bottom<0)&&(a.value=!1)},P=()=>{a.value=!1};return Ke(()=>{window.addEventListener("scroll",T,!0),window.addEventListener("resize",P,!1)}),_t(()=>{window.removeEventListener("scroll",T,!0),window.removeEventListener("resize",P,!1)}),(M,I)=>(p(),U(Oe,Z({ref_key:"QxDate",ref:o,modelValue:i.value,"onUpdate:modelValue":I[2]||(I[2]=c=>i.value=c),class:u(s),clearable:e.clearable,"lazy-rules":"ondemand"},M.$attrs,{onClear:f,onFocus:m}),{control:d(()=>[u(x)?M.$attrs.readonly?(p(),A("span",pr,z(u(x)),1)):(p(),U(Be,{key:2},{default:d(()=>[X(z(u(x)),1)]),_:1})):(p(),A("span",mr,z(e.placeholder),1))]),append:d(()=>[y(be,{name:"event"})]),default:d(()=>[y(at,{modelValue:a.value,"onUpdate:modelValue":I[1]||(I[1]=c=>a.value=c),offset:[0,5],anchor:"bottom left",breakpoint:"0","no-parent-event":"","no-refocus":"",self:"top left","transition-hide":"jump-up","transition-show":"jump-down",onHide:$,onBeforeHide:b},{default:d(()=>[y(sn,Z({modelValue:i.value,"onUpdate:modelValue":I[0]||(I[0]=c=>i.value=c),"text-color":u(n)("primary"),minimal:""},u(w),{"onUpdate:modelValue":S}),null,16,["modelValue","text-color"])]),_:1},8,["modelValue"])]),_:1},16,["modelValue","class","clearable"]))}};var hr=Object.freeze(Object.defineProperty({__proto__:null,default:vr},Symbol.toStringTag,{value:"Module"}));const gr={__name:"QxEditor",props:{input:Function,readonly:Boolean,clearable:Boolean,placeholder:String,modelValue:[String,Number]},emits:["input","update:modelValue"],setup(e,{emit:l}){const t=e,n=j(null),o=h(()=>({"toolbar-rounded":!0,"min-height":"5rem",placeholder:t.placeholder,readonly:t.readonly})),i=j(""),a=()=>{i.value!==t.modelValue&&(i.value=t.modelValue||"")};se(fe(t,"modelValue"),()=>a(),{immediate:!0});const s=()=>ve(()=>n.value.focus()),v=C=>{l("update:modelValue",C),t.input?t.input(C):l("input",C)};return(C,w)=>(p(),U(Oe,Z({modelValue:i.value,"onUpdate:modelValue":w[1]||(w[1]=x=>i.value=x),readonly:e.readonly,class:"qx-editor","no-error-icon":""},C.$attrs,{onFocus:s}),{control:d(()=>[y(un,Z({ref_key:"QxEditor",ref:n,modelValue:i.value,"onUpdate:modelValue":w[0]||(w[0]=x=>i.value=x)},u(o),{"onUpdate:modelValue":v}),null,16,["modelValue"])]),_:1},16,["modelValue","readonly"]))}};var yr=Object.freeze(Object.defineProperty({__proto__:null,default:gr},Symbol.toStringTag,{value:"Module"}));function Ul(e={}){return e.label?e.label.split(",").map(l=>l.trim()):["label"]}function zl(e={}){return e.value||"value"}const pl="--";function Ql(e,l){if(K(e))return"";if(ne(e)!=="object")return e;const t=Ul(l);let n="";for(const o of t)n+=`${pl}${e[o]}`;return n.replace(pl,"")}function nt(e,l){return K(e)?"":ne(e)!=="object"?e:e[zl(l)]}function Lt(e,l){if(K(e))return!1;const t=ne(e);if(!["object","array"].includes(t))return!1;const n=l?l.disable||"isEnable":"disable";return t==="object"?[!0,"0"].includes(e[n]):!!e.filter(o=>[!0,"0"].includes(o[n]))}function Ot(e={},l,t){if(K(e))return"";const n=t||Ql;return ne(e)==="array"?e.map(o=>n(o,l)).join(","):n(e,l)}function br(e={},l){return K(e)?"":ne(e)==="array"?e.map(t=>nt(t,l)).join(","):nt(e,l)}function _r(e=[],l,t){return K(t)?e:(t=t.toLowerCase(),e.filter(n=>String(Ql(n,l)).toLowerCase().includes(t)))}function St(e,l,t){const n=new Map;return t&&(e=Te(e)),e.reverse(),e=e.filter(o=>!n.has(nt(o,l))&&n.set(nt(o,l),1)),e.reverse()}const kr={__name:"QxSelect",props:{type:String,rules:Array,props:Object,field:String,page:Boolean,dicUrl:String,options:Array,clearable:{type:Boolean,default:!0},rowInfo:Object,loading:Boolean,change:Function,dicQuery:Object,keyWords:String,multiple:Boolean,isSearch:Boolean,dicMethod:String,placeholder:String,formatLabel:Function,modelValue:[String,Number,Array]},emits:["change","update:modelValue"],setup(e,{emit:l}){const t=e,n=j(0),o=j([]),i=j(null),a=j(!!t.dicUrl),s=j(!1),v=j(void 0),C=j(!1),w=j(t.options||[]),x=h(()=>br(v.value,t.props)),g=h(()=>t.dicMethod==="get"?Bt:Ye),b=h(()=>K(v.value)?t.placeholder:""),$=h(()=>N=>String(x.value||"").split(",").includes(nt(N,t.props))?!1:Lt(N,t.props)),m=h(()=>{const N=t.rules||[];return t.isSearch||N.push(k=>!Lt(k,t.props)||ee.t("SelectedTip")),N}),S=fe(t,"rowInfo"),f=N=>{S.value&&(S.value[`SSS_${t.field}`]=Ot(N,t.props,t.formatLabel))},T=N=>{let k=[];ne(N)==="number"?k=[N]:ne(N)==="array"?k=N:ne(N)==="string"&&(k=String(N).split(","));const B=(w.value||[]).filter(ce=>k.includes(nt(ce,t.props)));if(B.length===k.length){o.value=[],o.value=Object.freeze([...w.value]),v.value=t.multiple?B:B[0],f(v.value);return}if(!a.value)return;const H=Te(t.dicQuery||{});H[zl(t.props)]=k.join(","),H.pageSize=k.length,s.value=!0,g.value(t.dicUrl,H,ce=>{const $e=ce.rows||ce;w.value=St([...t.options||[],...$e],t.props),o.value=[],ve(()=>{o.value=Object.freeze([...w.value]),i.value&&i.value.refresh()}),v.value=t.multiple?St([...B,...$e],t.props):$e[0],f(v.value),s.value=!1},()=>{o.value=[],ve(()=>{o.value=Object.freeze([...w.value]),i.value&&i.value.refresh()}),v.value=t.multiple?B:B[0]||N,f(v.value),s.value=!1})},P=()=>{if(x.value===t.modelValue){f(v.value);return}if(K(t.modelValue)){v.value=void 0;return}T(t.modelValue)},M=()=>{a.value=!!t.dicUrl,w.value=t.options||[],P()};se(fe(t,"modelValue"),()=>P()),se(fe(t,"options"),()=>M()),se(fe(t,"dicQuery"),()=>M(),{immediate:!0});const I=N=>{const k=Te(t.dicQuery||{});k.isEnable="1",k.pageSize="-1",s.value=!0,g.value(t.dicUrl,k,B=>{const H=B.rows||B;w.value=St([...t.options||[],...H],t.props),N(()=>{o.value=[],ve(()=>{o.value=Object.freeze([...w.value]),i.value&&i.value.refresh()})}),a.value=!1,s.value=!1},()=>{N(()=>{o.value=[],ve(()=>{o.value=Object.freeze([...w.value]),i.value&&i.value.refresh()})}),s.value=!1})},c=j(1),_=j(1e4),r=j(void 0),D=({ref:N,to:k})=>{if(_.value<51||!t.page||!a.value||s.value||_.value&&k>=_.value)return;s.value=!0;const B=Te(t.dicQuery||{});if(r.value)if(c.value=1,t.keyWords)B[t.keyWords]=r.value,B.andKeywordLikeItem={keyword:r.value,propertys:[t.keyWords]};else{const H=Ul(t.props);B.andKeywordLikeItem={keyword:r.value,propertys:H}}B.pageNum=c.value,B.isEnable="1",B.pageSize=50,g.value(t.dicUrl,B,H=>{c.value++,n.value=0;const ce=H.rows||H;!r.value&&H.total&&(_.value=+H.total),w.value=St([...t.options||[],...ce],t.props),o.value=[],ve(()=>{o.value=Object.freeze([...w.value]),N.refresh()}),a.value=!1,s.value=!1},()=>{s.value=!1})},F=(N,k)=>{if(n.value=0,r.value=N,N&&t.page&&(a.value=!!t.dicUrl),a.value&&_.value>50){if(t.page){n.value=800,k();return}I(k)}else k(()=>{o.value=[],ve(()=>{o.value=Object.freeze([..._r(w.value,t.props,N)]),i.value&&i.value.refresh()})})},Q=()=>C.value=!0,L=()=>R(),R=()=>{if(ve(()=>{i.value&&i.value.blur()}),!C.value)return;let N=t.multiple?v.value:[v.value];N=Te(N),l("update:modelValue",x.value),t.change?t.change(x.value,N):l("change",x.value,N),C.value=!1};return(N,k)=>(p(),U(xl,Z({ref_key:"QxSelect",ref:i,modelValue:v.value,"onUpdate:modelValue":k[0]||(k[0]=B=>v.value=B),clearable:e.clearable,"input-debounce":n.value,loading:e.loading||s.value,multiple:e.multiple,"option-disable":B=>u($)(B),options:o.value,placeholder:u(b),rules:u(m),behavior:"menu","transition-hide":"jump-up","transition-show":"jump-down","use-input":""},N.$attrs,{onClear:L,onFilter:F,onPopupHide:R,onVirtualScroll:D,"onUpdate:modelValue":Q}),we({selected:d(()=>[y(Tt,null,{default:d(()=>[y(Be,null,{default:d(()=>[X(z(u(Ot)(v.value,e.props,e.formatLabel)),1)]),_:1})]),_:1})]),option:d(({itemProps:B,opt:H})=>[y(ht,Z({class:[u(Lt)(H,e.props)?"bg-red-4":"","row items-center"]},B),{default:d(()=>[y(Tt,null,{default:d(()=>[y(Be,null,{default:d(()=>[X(z(u(Ot)(H,e.props,e.formatLabel)),1)]),_:2},1024)]),_:2},1024)]),_:2},1040,["class"])]),"no-option":d(()=>[y(ht,null,{default:d(()=>[y(vt,{class:"text-italic text-center"},{default:d(()=>[X(z(N.$t("NoData")),1)]),_:1})]),_:1})]),_:2},[me(Object.keys(Fe()),B=>({name:B,fn:d(()=>[J(N.$slots,B)])}))]),1040,["modelValue","clearable","input-debounce","loading","multiple","option-disable","options","placeholder","rules"]))}};var xr=Object.freeze(Object.defineProperty({__proto__:null,default:kr},Symbol.toStringTag,{value:"Module"}));const Sr={key:0},wr={key:1,class:"placeholder"},$r={__name:"QxTime",props:{type:String,clearable:{type:Boolean,default:!0},placeholder:String,option:[Array,Function],lazyRules:[Boolean,String],modelValue:[String,Date]},emits:["change","update:modelValue"],setup(e,{emit:l}){const t=e,n=["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],o=["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59"],i=j(null),a=j(null),s=j(null),v=j(void 0),C=j(!1),w=h(()=>C.value?"q-field--focused q-field--highlighted":""),x=h(()=>(M,I)=>I==="H"?(v.value||"").startsWith(M):(v.value||"").endsWith(M)),g=(M="",I)=>{if(!M)return;if(I==="H"){const _=o.findIndex(r=>M.endsWith(r));s.value&&s.value.setScrollPosition("vertical",_*32-80,0);return}const c=n.findIndex(_=>M.startsWith(_));a.value&&a.value.setScrollPosition("vertical",c*32-80,0)},b=()=>{if(v.value!==t.modelValue){if(K(t.modelValue)){v.value=void 0;return}typeof t.modelValue=="object"?v.value=it.formatDate(t.modelValue,"HH:mm"):v.value=t.modelValue}};se(fe(t,"modelValue"),()=>{b()},{immediate:!0});const $=()=>{i.value&&i.value.blur()},m=()=>{l("update:modelValue",v.value||""),t.lazyRules!=="ondemand"&&i.value&&i.value.validate()},S=()=>{C.value=!C.value;let M=setTimeout(()=>{g(v.value,"H"),g(v.value,"M"),clearTimeout(M),M=null},0)},f=(M,I)=>{if(I==="H"){if(!v.value){v.value=`${M}:00`,s.value&&s.value.setScrollPosition("vertical",0,200);return}v.value=v.value.replace(/^../,M),g(v.value,I);return}if(!v.value){v.value=`08:${M}`,a.value&&a.value.setScrollPosition("vertical",7*32,100);return}v.value=v.value.replace(/..$/,M),g(v.value,I)},T=()=>{if(!C.value||!i.value)return;const M=i.value.$el.getBoundingClientRect(),I=window.innerHeight;(M.top>I||M.bottom<0)&&(C.value=!1)},P=()=>{C.value=!1};return Ke(()=>{window.addEventListener("scroll",T,!0),window.addEventListener("resize",P,!1)}),_t(()=>{window.removeEventListener("scroll",T,!0),window.removeEventListener("resize",P,!1)}),(M,I)=>(p(),U(Oe,Z({ref_key:"QxTime",ref:i,modelValue:v.value,"onUpdate:modelValue":I[1]||(I[1]=c=>v.value=c),class:u(w),clearable:e.clearable,"lazy-rules":"ondemand"},M.$attrs,{onFocus:S}),{control:d(()=>[v.value?(p(),A("span",Sr,z(v.value),1)):(p(),A("span",wr,z(e.placeholder),1))]),append:d(()=>[y(be,{name:"access_time"})]),default:d(()=>[y(at,{modelValue:C.value,"onUpdate:modelValue":I[0]||(I[0]=c=>C.value=c),offset:[0,5],anchor:"bottom left",breakpoint:"0",class:"qx-time","no-parent-event":"","no-refocus":"",self:"top left","transition-hide":"jump-up","transition-show":"jump-down",onHide:m,onBeforeHide:$},{default:d(()=>[y(Et,{ref_key:"hourArea",ref:a},{default:d(()=>[(p(),A(ae,null,me(n,c=>He(y(ht,{key:c,active:u(x)(c,"H"),"active-class":"time-active-cls",clickable:"",dense:"",onClick:_=>f(c,"H")},{default:d(()=>[y(vt,null,{default:d(()=>[X(z(c),1)]),_:2},1024)]),_:2},1032,["active","onClick"]),[[al]])),64))]),_:1},512),y(bt,{vertical:""}),y(Et,{ref_key:"minArea",ref:s},{default:d(()=>[(p(),A(ae,null,me(o,c=>He(y(ht,{key:c,active:u(x)(c,"M"),"active-class":"time-active-cls",clickable:"",dense:"",onClick:_=>f(c,"M")},{default:d(()=>[y(vt,null,{default:d(()=>[X(z(c),1)]),_:2},1024)]),_:2},1032,["active","onClick"]),[[al]])),64))]),_:1},512)]),_:1},8,["modelValue"])]),_:1},16,["modelValue","class","clearable"]))}};var Cr=Object.freeze(Object.defineProperty({__proto__:null,default:$r},Symbol.toStringTag,{value:"Module"}));xn([Sn,wn,$n,Cn,Vn,Tn,jn,Nn,qn,Bn,Ln,On,Fn]);const Vr={__name:"QCharts",props:{rows:Array,ySite:Array,xSite:String,xName:String,title:String,colors:Array,stack:Object,charts:Array,xRotate:Number,legend:{type:Boolean,default:!0},loading:Boolean,contentClass:String,labelMap:[Object,Array]},setup(e){const l=e,t=j(null),n=h(()=>K(l.labelMap)?K(l.xSite)?[]:[l.xSite]:ne(l.labelMap)==="object"?K(l.xSite)?Object.keys(l.labelMap):[l.xSite,...Object.keys(l.labelMap)]:K(l.xSite)?l.labelMap:[l.xSite,...l.labelMap]),o=h(()=>({type:"category",name:l.xName||"",nameLocation:"start",nameTextStyle:{align:"center",verticalAlign:"top",padding:[8,0,0,5]},axisTick:{show:!1},axisLine:{show:!1},axisLabel:{interval:0,rotate:l.xRotate||0}})),i=h(()=>{if(K(l.ySite))return{};const S=[];for(const f of l.ySite)ne(f)==="object"?S.push({name:f.name,type:"value",axisLabel:{formatter:"{value}"+(f.format||"")},alignTicks:!0}):S.push({type:"value",axisLabel:{formatter:"{value}"+(f||"")},alignTicks:!0});return S}),a=h(()=>({barMaxWidth:30,barMinWidth:8,symbolSize:8,smooth:!0,itemStyle:{borderRadius:[5,5,0,0]}})),s=S=>{if(!K(l.stack)){for(const f in l.stack)if((l.stack[f]||[]).includes(S))return f}},v=h(()=>{if(K(l.charts)){if(K(n.value))return[];const f=[];for(const T of n.value)T!==n.value[0]&&f.push({type:"bar",name:T,...a.value,stack:s(T)});return f}const S=[];for(const f of l.charts)if(ne(f)==="object"){const T={...a.value,...f};f.color&&(T.itemStyle=T.itemStyle||{},T.itemStyle.color=new il(0,0,0,1,f.color)),f.emColor&&(T.emphasis={itemStyle:{color:new il(0,0,0,1,f.emColor)}}),S.push(T)}else S.push({type:f,...a.value});return S}),C=S=>K(l.labelMap)||ne(l.labelMap)==="array"?S:l.labelMap[S]||S,w=(S,f)=>K(S)?"-":ne(S)==="object"?K(S[f])?"-":S[f]:S,x=(S=[])=>{let f="",T="";for(const P of S)T||(T=P.axisValue),f+=`${P.marker} ${C(P.seriesName)}\uFF1A${w(P.value,P.seriesName)}<br />`;return`${T}<br />${f}`},g=h(()=>{const S={dataset:{dimensions:n.value,source:l.rows||[]},legend:{top:10,show:l.legend,data:null,formatter:T=>C(T)},grid:{top:50,left:50,right:20,bottom:30},title:{top:8,text:l.title},tooltip:{trigger:"axis",className:"echarts-tooltip-cls",formatter:T=>x(T)},xAxis:o.value,yAxis:i.value,series:v.value},f=(l.rows||[]).length;return f>30?S.dataZoom=[{show:!0,type:"slider",xAxisIndex:0,end:Math.floor(3e3/f),showDetail:!1,brushSelect:!1}]:S.dataZoom=[{show:!1}],l.colors&&(S.color=l.colors),S});let b=null;const $=()=>{b||(b=En(t.value)),b.setOption(g.value)},m=()=>{if(b)return b.resize();t.value&&$()};return(S,f)=>(p(),A(ae,null,[re("div",{ref_key:"QChart",ref:t,class:pe([e.contentClass,"q-charts shadow-3 rounded-borders"])},null,2),y(Qe,{showing:e.loading},{default:d(()=>[y(We,{color:"primary",size:"50px"})]),_:1},8,["showing"]),y(Vt,{debounce:"1000",onResize:m})],64))}};var Tr=Object.freeze(Object.defineProperty({__proto__:null,default:Vr},Symbol.toStringTag,{value:"Module"}));const{SSF:jr,utils:ft,writeFile:Nr}=XLSX,wt={style:"thin",color:{auto:1}},qr={top:wt,left:wt,bottom:wt,right:wt},Al={border:qr,font:{name:"fangsong",sz:16},alignment:{horizontal:"center",vertical:"center",wrapText:!0}},Br=(e,l)=>(l&&(e+=1462),(Date.parse(e)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3)),Lr=e=>{const l={},t={s:{c:1e7,r:1e7},e:{c:0,r:0}};for(let n=0;n!==e.length;++n)for(let o=0;o!==e[n].length;++o){t.s.r>n&&(t.s.r=n),t.s.c>o&&(t.s.c=o),t.e.r<n&&(t.e.r=n),t.e.c<o&&(t.e.c=o);const i={v:e[n][o]},a=ft.encode_cell({c:o,r:n});typeof i.v=="number"?i.t="n":typeof i.v=="boolean"?i.t="b":i.v instanceof Date?(i.t="n",i.z=jr._table[14],i.v=Br(i.v)):(i.t="s",i.v=`
${i.v||""}
`),i.s=Al,l[a]=i}return t.s.c<1e7&&(l["!ref"]=ft.encode_range(t)),l};function Or({multiHeader:e=[],header:l=[],data:t=[],sheetName:n,fileName:o,merges:i=[],autoWidth:a=!1,bookType:s="xlsx",cols:v=[]}={}){o=o||"excel-list",t=[...t];for(let g=0;g<l.length;g++)t[g].unshift(l[g]);for(let g=e.length-1;g>-1;g--)t.unshift(e[g]);const C=[],w=n;for(let g=0;g<l.length;g++)C.push(Lr(t[g]));if(i.length>0&&(C["!merges"]||(C["!merges"]=[]),i.forEach(g=>{C["!merges"].push(ft.decode_range(g))})),a){const g=[];for(let $=0;$<l.length;$++)g.push(t[$].map(m=>m.map(S=>S?S.toString().charCodeAt(0)>255?{wch:5}:{wch:5}:{wch:10})));const b=[];for(let $=0;$<g.length;$++){b[$]=g[$][0];for(let m=1;m<g[$].length;m++)for(let S=0;S<g[$][m].length;S++)b[$][S].wch<g[$][m][S].wch&&(b[$][S].wch=g[$][m][S].wch)}for(let $=0;$<b.length;$++)C[$]["!cols"]=b[$]}const x=ft.book_new();for(let g=0;g<l.length;g++){if(!a){C[g]["!cols"]=[];const b=l[g];for(let $=0;$<b.length;$++)C[g]["!cols"].push({wch:v&&v[g]&&v[g][$]||20})}C[g]["!pageSetup"]={scale:"auto",orientation:"landscape"},C[g]["!printHeader"]=[1,2],ft.book_append_sheet(x,C[g],w[g])}Nr(x,`${o}.${s}`,{bookType:s,bookSST:!1,type:"binary",defaultCellStyle:Al})}const Fr={__name:"QExport",props:{data:Array,columns:Array,loading:Boolean,fileName:String,exportUrl:String,isStream:Boolean,exportText:String,exportMethod:String,exportQuery:[Object,Function],isFormat:{type:Boolean,default:!0}},setup(e){const l=e,t=j(!1),n=h(()=>typeof l.exportQuery=="function"?l.exportQuery():l.exportQuery||{}),o=h(()=>l.exportMethod==="get"?Bt:Ye);se(()=>l.loading,()=>t.value=l.loading,{immediate:!0});const i=(w=[],x,g={})=>{const b=g.label||"label",$=g.value||"value";return(w.find(S=>S===x||S[$]===x)||{})[b]||x},a=w=>{const x=[],g=[],b={},$={},m={},S=[];for(const T of l.columns||[]){if(T.export===!1||T.hide&&!T.export)continue;x.push(T.label);const P=T.exportWidth||100;P<40?S.push(8):S.push(Math.ceil(P/5));const M=T.exportField||T.field;g.push(M),T.props&&(m[M]=T.props),T.format&&($[M]=T.format),T.options&&["array","function"].includes(ne(T.options))&&(b[M]=T.options)}let f;return l.isFormat?f=w.map(T=>g.map(P=>{if($[P])return $[P](T[P],T);if(b[P]){if(["array","object"].includes(typeof b[P]))return i(b[P],T[P],m[P]);if(["function"].includes(typeof b[P]))return i(b[P](T),T[P],m[P])}return T[P]})):f=w.map(T=>g.map(P=>T[P])),{cols:[S],header:[x],data:[f],sheetName:["sheet1"],fileName:l.fileName}},s=(w=[])=>{if(w.length){Or(a(w)),t.value=!1;return}$t.create({type:"warning",icon:"warning",message:ee.t("NoExportData")}),t.value=!1},v=()=>{typeof n.value!="string"&&(t.value=!0,o.value(l.exportUrl,{...n.value,pageSize:"-1"},w=>s(w.rows||w),()=>{t.value=!1}))},C=()=>{if(l.isStream){t.value=!0,yt({dicUrl:l.exportUrl,dicQuery:l.exportQuery||{},fileName:l.fileName,dicMethod:l.exportMethod||"post",done:()=>{t.value=!1}});return}l.exportUrl?v():s(l.data)};return(w,x)=>{const g=Ge("qx-btn");return p(),U(g,{label:e.exportText||w.$t("ExportList"),loading:t.value,icon:"cloud_download","text-color":"primary",onClick:C},null,8,["label","loading"])}}};var Er=Object.freeze(Object.defineProperty({__proto__:null,default:Fr},Symbol.toStringTag,{value:"Module"}));const Pr={class:"row no-wrap items-center q-pa-sm q-gutter-xs"},Mr={class:"col"},Ir={class:"q-uploader__title"},Ur={class:"q-uploader__subtitle"},zr={__name:"QImport",props:{downUrl:String,loading:Boolean,fileName:String,downText:String,importUrl:String,readonly:Boolean,downQuery:Object,errorParam:Array,downMethod:String,importText:String,importQuery:Object,importAfter:Function},emits:["import-after"],setup(e,{emit:l}){const t=e,n=j([]),o=j(null),i=j(null),a=j(!1),s=j(!1),v=h(()=>`${Ue}${t.importUrl}`),C=h(()=>[{name:"Authorization",value:kt().token},{name:"lang",value:ee.locale}]),w=h(()=>({batch:!0,label:ee.t("ImportTips"),accept:".xls, .xlsx",readonly:t.readonly,"max-files":1,color:"grey-6",class:"q-ma-sm",headers:C.value})),x=h(()=>({menu:!0,menuWidth:100,rightBtn:!1,column:[{label:`${ee.t("Remarks")}`,field:"remark",rowsNum:3},{label:`${ee.t("Create")}${ee.t("Time")}`,field:"createdTime",width:90}]}));se(()=>t.loading,()=>s.value=t.loading,{immediate:!0}),se(()=>a.value,_=>{!_&&i.value&&i.value.reset()});const g=()=>({url:v.value,method:"POST",fieldName:"file",formFields:Object.keys(t.importQuery||{}).map(_=>({name:_,value:t.importQuery[_]}))}),b=()=>{if(pt.stop(),i.value&&i.value.reset(),!t.errorParam||!t.errorParam.length){o.value&&o.value(!1);return}Ye("/oss/api/ossUploadRecord/list",{pageNum:1,pageSize:3,serviceName:t.errorParam[0],bussinessModule:t.errorParam[1]},_=>{n.value=_.rows,o.value&&o.value(!1)},()=>{o.value&&o.value(!1)})},$=()=>{s.value=!0},m=()=>{s.value=!1},S=_=>{if(_.xhr.response){const r=JSON.parse(_.xhr.response);je[r.status](r)}else{$t.create({type:"negative",message:ee.t("ImportError")}),o.value&&o.value(!1);return}b()},f=_=>{if(_.xhr.response){const r=JSON.parse(_.xhr.response);if(r.code!=="0"){je[r.code](r),b();return}pt.stop(),i.value&&i.value.reset(),t.importAfter&&t.importAfter(r.data),l("import-after",r.data)}o.value&&o.value()},T=()=>{a.value=!0},P=()=>{s.value=!0,yt({dicUrl:t.downUrl,dicQuery:t.downQuery||{},fileName:t.fileName,dicMethod:t.downMethod||"post",done:()=>{s.value=!1}})},M=_=>{s.value=!0,yt({dicUrl:"/oss/api/ossUploadRecord/download",dicQuery:{path:_.resultPath},fileName:_.name,dicMethod:"get",done:()=>{s.value=!1}})},I=_=>{i.value||(i.value=_)},c=_=>{if(i.value){if(!i.value.files.length){$t.create({type:"negative",message:ee.t("ImportNonFiles")}),_(!1);return}i.value.upload()}o.value=_};return(_,r)=>{const D=Ge("qx-btn");return p(),A(ae,null,[y(D,{label:e.importText||_.$t("Import"),loading:s.value,icon:"cloud_upload","text-color":"primary",onClick:T},null,8,["label","loading"]),y(D,{label:e.downText||_.$t("TemplateDownload"),loading:s.value,class:"q-ml-sm","text-color":"primary",onClick:P},null,8,["label","loading"]),y(Zt,{modelValue:a.value,"onUpdate:modelValue":r[0]||(r[0]=F=>a.value=F),header:`${_.$t("Import")}`,menuBtn:!e.readonly,width:"600",onConfirm:c},{default:d(()=>[y(Xt,{data:n.value,option:u(x)},{top:d(()=>[y(At,Z({factory:g},u(w),{onFailed:S,onFinish:m,onStart:$,onUploaded:f}),{header:d(F=>[X(z(I(F))+" ",1),re("div",Pr,[F.queuedFiles.length>0?(p(),U(ie,{key:0,dense:"",flat:"",icon:"clear_all",round:"",onClick:F.removeQueuedFiles},null,8,["onClick"])):Y("",!0),F.uploadedFiles.length>0?(p(),U(ie,{key:1,dense:"",flat:"",icon:"done_all",round:"",onClick:F.removeUploadedFiles},null,8,["onClick"])):Y("",!0),F.isUploading?(p(),U(Sl,{key:2,class:"q-uploader__spinner"})):Y("",!0),re("div",Mr,[re("div",Ir,z(u(w).label),1),re("div",Ur,z(F.uploadSizeLabel)+" / "+z(F.uploadProgressLabel),1)]),F.canAddFiles?(p(),U(ie,{key:3,dense:"",flat:"",icon:"add_box",round:"",type:"a",onClick:F.pickFiles},{default:d(()=>[y(Dt)]),_:2},1032,["onClick"])):Y("",!0)])]),_:1},16)]),menu:d(({row:F})=>[y(ie,{loading:s.value,color:"primary",dense:"",flat:"",icon:"cloud_download",round:"",onClick:Q=>M(F)},null,8,["loading","onClick"])]),_:1},8,["data","option"])]),_:1},8,["modelValue","header","menuBtn"])],64)}}};var Qr=Object.freeze(Object.defineProperty({__proto__:null,default:zr},Symbol.toStringTag,{value:"Module"}));const Ar={class:"q-preview"},Dr={class:"q-preview-tip glossy text-white flex justify-between items-center"},Rr=["src"],Hr={class:"q-preview-tip glossy text-white flex justify-center items-center q-gutter-x-xl"},Jt={__name:"QPreview",props:{name:String,index:Number,imgList:Array,keyWords:String,modalValue:Boolean},setup(e){const l=e,t=j("false"),n=j(l.index||0),o=h(()=>{if(!(!l.imgList||!l.imgList[n.value]))return l.imgList[n.value][l.name||"name"]});Ht(()=>{n.value=l.index||0});const i=h(()=>g=>{if(typeof g=="string")return g;if(l.keyWords){const b=(l.keyWords||"").split(".");let $;for(const m of b)$?$=$[m]:$=g[m];return $}return g.src}),a=j(1),s=j(0),v=h(()=>({transform:`scale(${a.value}) rotate(${s.value}deg)`})),C=g=>{a.value*=g},w=g=>s.value+=g,x=()=>{a.value=1,s.value=0};return(g,b)=>(p(),U(bl,{modelValue:t.value,"onUpdate:modelValue":b[5]||(b[5]=$=>t.value=$),"full-height":"","full-width":""},{default:d(()=>[re("div",Ar,[re("div",Dr,[X(z(u(o)||`${g.$t("Picture")}${g.$t("Preview")}`)+" ",1),He((p(),U(ie,{class:"q-btn-close",dense:"",flat:"",icon:"close"},{default:d(()=>[y(Ve,ke(Ae(g.$tooltipAttr)),{default:d(()=>[X(z(g.$t("Close")),1)]),_:1},16)]),_:1})),[[dn]])]),y(cn,{modelValue:n.value,"onUpdate:modelValue":b[0]||(b[0]=$=>n.value=$),animated:"",infinite:"",swipeable:"",thumbnails:"","transition-next":"slide-left","transition-prev":"slide-right"},{default:d(()=>[(p(!0),A(ae,null,me(e.imgList||[],($,m)=>(p(),U(fn,{key:m,"img-src":u(i)($),name:m},{default:d(()=>[re("img",{src:u(i)($),style:_e(u(v)),alt:"",class:"rounded-borders"},null,12,Rr)]),_:2},1032,["img-src","name"]))),128))]),_:1},8,["modelValue"]),re("div",Hr,[y(ie,{dense:"",flat:"",icon:"loupe",onClick:b[1]||(b[1]=$=>C(1.1))}),y(ie,{dense:"",flat:"",icon:"remove_circle_outline",onClick:b[2]||(b[2]=$=>C(.9))}),y(ie,{dense:"",flat:"",icon:"restore",onClick:x}),y(ie,{dense:"",flat:"",icon:"rotate_left",onClick:b[3]||(b[3]=$=>w(-45))}),y(ie,{dense:"",flat:"",icon:"rotate_right",onClick:b[4]||(b[4]=$=>w(45))})])])]),_:1},8,["modelValue"]))}};var Wr=Object.freeze(Object.defineProperty({__proto__:null,default:Jt},Symbol.toStringTag,{value:"Module"}));const Kr={class:"row items-start q-gutter-sm"},Gr=["onClick"],Yr=["onClick"],Zr={key:1,class:"absolute-full"},Xr=["onClick"],Jr={__name:"QPicture",props:{lazyRules:[Boolean,String],modelValue:String,clearable:Boolean,required:Boolean,outlined:Boolean,readonly:Boolean,loading:Boolean,sName:String,bName:String,limitNum:{type:Number,default:5},isLtXM:{type:Number,default:50}},emits:["update:modelValue"],setup(e,{emit:l}){const t=e,{humanStorageSize:n}=ut,o=j(null),i=j(!1),a=j(!1),s=h(()=>[{name:"Authorization",value:kt().token},{name:"lang",value:ee.locale}]),v=h(()=>`${Ue}oss/api/ossUploadRecord/batchUpload`),C=h(()=>t.isLtXM*1024*1024),w=F=>{const Q=o.value.files.map(L=>L.__key);return F.filter(L=>!Q.includes(`${L.name}${L.size}`))},x=h(()=>({flat:!0,batch:!0,multiple:!0,label:void 0,accept:"image/*","auto-upload":!0,color:"transparent",readonly:t.readonly,"max-files":t.limitNum,headers:s.value,"max-file-size":C.value})),g=j(""),b=F=>{const Q={id:F.id,lastModified:+F.endTime,name:F.originalFileName,size:F.sizeBytes,__progressLabel:"100.00%",__status:"uploaded",resultPath:F.resultPath,__sizeLabel:F.sizeBytes<1024?`${F.sizeBytes}.0B`:n(F.sizeBytes)};Q.__key=`${F.originalFileName}${F.sizeBytes}`,F.imageFlag==="1"&&(Q.__img={src:F.imageSignedUrl}),o.value&&o.value.files.push(Q)},$=()=>{if(t.modelValue===g.value)return;if(!t.modelValue){g.value="",o.value&&o.value.reset();return}i.value=!0;const F={pageSize:"-1",imageSignedUrlFlag:!0,idList:(t.modelValue||"").split(",")};Ye("/oss/api/ossUploadRecord/list",F,Q=>{g.value=t.modelValue;for(const L of Q.rows)b(L);i.value=!1},()=>{i.value=!1})};se(fe(t,"modelValue"),()=>{$()},{immediate:!0});const m=()=>({url:v.value,method:"POST",fieldName:"files",formFields:[{name:"serviceName",value:t.sName||"fmbb"},{name:"bussinessModule",value:t.bName||"fmbb"},{name:"publicRead",value:!1}]}),S=F=>{o.value=F},f=()=>{i.value=!0},T=()=>{i.value=!1},P=j(0),M=F=>{if(F.xhr.response){const Q=JSON.parse(F.xhr.response);je[Q.status](Q)}},I=()=>{const F=o.value.files;g.value=F.map(Q=>Q.id).join(","),l("update:modelValue",g.value||"")},c=F=>{if(F.xhr.response){const Q=JSON.parse(F.xhr.response);if(Q.code!=="0"){for(const R of F.files)o.value.updateFileStatus(R,"failed",R.size),o.value.removeFile(R);je[Q.code](Q);return}const L=F.files.length;for(let R=0;R<L;R++)F.files[R].id=Q.data[R].id;I()}},_=(F,Q)=>{Q>-1&&F.__status!=="uploading"&&(P.value=Q,a.value=!0)},r=F=>{i.value=!0,yt({dicUrl:"/oss/api/ossUploadRecord/download",dicQuery:{path:F.resultPath},fileName:F.name,dicMethod:"get",done:()=>{i.value=!1}})},D=(F,Q)=>{Yt({msg:`${ee.t("DelTips")}`},()=>{o.value.files.splice(Q,1),o.value.removeFile(F),I()},()=>{})};return(F,Q)=>(p(),A(ae,null,[y(Oe,Z({hint:e.readonly?"":F.$t("PictureTips",[e.isLtXM]),label:void 0,loading:e.loading,readonly:e.readonly,borderless:"",class:"q-picture","lazy-rules":"ondemand","no-error-icon":""},F.$attrs),{control:d(()=>[y(At,Z({factory:m,filter:w},u(x),{onFailed:M,onFinish:T,onStart:f,onUploaded:c}),{header:d(L=>[X(z(S(L))+" ",1),re("div",Kr,[(p(!0),A(ae,null,me(L.files,(R,N)=>(p(),A("div",{key:R.__key,class:"q-pictrue-card no-border rounded-borders shadow-1 overflow-hidden flex-center cursor-pointer",onClick:Se(k=>_(R,N),["stop"])},[R.__img?(p(),U(wl,{key:0,src:R.__img.src,loading:"lazy"},{default:d(()=>[R.__status==="failed"?(p(),A("div",{key:0,class:"uploader-error rounded-borders absolute-top-right",onClick:Se(_,["stop"])},[y(be,{class:"cursor-pointer",color:"negative",name:"cloud_upload",onClick:L.upload},{default:d(()=>[y(Ve,ke(Ae(F.$tooltipAttr)),{default:d(()=>[X(z(`${F.$t("UploadFailed")}`),1)]),_:1},16)]),_:2},1032,["onClick"])],8,Yr)):Y("",!0),R.__status==="uploading"?(p(),A("div",Zr,[y(Qe,{showing:!0},{default:d(()=>[y($l,{value:R.__progress*100,color:"primary",size:"60px"},null,8,["value"])]),_:2},1024)])):(p(),A("div",{key:2,class:"q-pictrue-tip absolute-bottom flex justify-around items-center",onClick:Se(_,["stop"])},[y(be,{class:"cursor-pointer",name:"cloud_download",onClick:k=>r(R)},null,8,["onClick"]),y(be,{class:"cursor-pointer",name:"delete",onClick:k=>D(R,N)},null,8,["onClick"])],8,Xr))]),_:2},1032,["src"])):Y("",!0)],8,Gr))),128)),e.readonly?Y("",!0):(p(),U(ie,{key:0,icon:"add",padding:"lg",style:{opacity:".8"},"text-color":"primary",onClick:L.pickFiles},{default:d(()=>[y(Dt),y(Ve,ke(Ae(F.$tooltipAttr)),{default:d(()=>[X(z(`${F.$t("PleaseSelect")}${F.$t("Picture")}`),1)]),_:1},16)]),_:2},1032,["onClick"]))])]),list:d(()=>[]),_:1},16)]),_:1},16,["hint","loading","readonly"]),y(Qe,{showing:i.value},{default:d(()=>[y(We,{color:"primary",size:"30px"})]),_:1},8,["showing"]),y(Jt,{modelValue:a.value,"onUpdate:modelValue":Q[0]||(Q[0]=L=>a.value=L),imgList:(o.value||{}).files,index:P.value,keyWords:"__img.src"},null,8,["modelValue","imgList","index"])],64))}};var eo=Object.freeze(Object.defineProperty({__proto__:null,default:Jr},Symbol.toStringTag,{value:"Module"}));const to={__name:"QxBtn",props:{color:String,textColor:String},setup(e){const l=e,t=h(()=>l.textColor||l.color||"primary");return(n,o)=>(p(),U(ie,Z({"text-color":u(t),"no-wrap":""},n.$attrs),{default:d(()=>[J(n.$slots,"default")]),_:3},16,["text-color"]))}};var lo=Object.freeze(Object.defineProperty({__proto__:null,default:to},Symbol.toStringTag,{value:"Module"}));const no={__name:"QxFile",props:{lazyRules:[Boolean,String],modelValue:String,clearable:Boolean,required:Boolean,outlined:Boolean,readonly:Boolean,loading:Boolean,sName:String,bName:String,limitNum:{type:Number,default:5},isLtXM:{type:Number,default:50}},emits:["update:modelValue"],setup(e,{emit:l}){const t=e,{humanStorageSize:n}=ut,o=xe("BgToColor"),i=j(null),a=j(!1),s=j(!1),v=j(!1),C=h(()=>i.value?i.value.files.filter(k=>k.__img):[]),w=h(()=>({menu:!0,menuWidth:100,rightBtn:!1,column:[{label:`${ee.t("File")}${ee.t("Name")}`,field:"name",rowsNum:3},{label:`${ee.t("File")}${ee.t("Size")}`,field:"__sizeLabel",width:90},{label:`${ee.t("File")}${ee.t("Status")}`,field:"__status",slot:!0,width:90,align:"center"},{label:`${ee.t("Thumbnail")}`,field:"picture",slot:!0,width:90,align:"center"}]})),x=h(()=>[{name:"Authorization",value:kt().token},{name:"lang",value:ee.locale}]),g=h(()=>`${Ue}oss/api/ossUploadRecord/batchUpload`),b=h(()=>t.isLtXM*1024*1024),$=k=>{const B=i.value.files.map(H=>H.__key);return k.filter(H=>!B.includes(`${H.name}${H.size}`))},m=h(()=>({flat:!0,batch:!0,multiple:!0,label:void 0,"auto-upload":!0,color:"transparent",readonly:t.readonly,"max-files":t.limitNum,headers:x.value,"max-file-size":b.value})),S=j(""),f=k=>{const B={id:k.id,lastModified:+k.endTime,name:k.originalFileName,size:k.sizeBytes,__progressLabel:"100.00%",__status:"uploaded",resultPath:k.resultPath,__sizeLabel:k.sizeBytes<1024?`${k.sizeBytes}.0B`:n(k.sizeBytes)};B.__key=`${k.originalFileName}${k.sizeBytes}`,k.imageFlag==="1"&&(B.__img={src:k.imageSignedUrl}),i.value&&i.value.files.push(B)},T=()=>{if(t.modelValue===S.value)return;if(!t.modelValue){S.value="",i.value&&i.value.reset();return}a.value=!0;const k={pageSize:"-1",imageSignedUrlFlag:!0,idList:(t.modelValue||"").split(",")};Ye("/oss/api/ossUploadRecord/list",k,B=>{S.value=t.modelValue;for(const H of B.rows)f(H);a.value=!1},()=>{a.value=!1})};se(fe(t,"modelValue"),()=>T(),{immediate:!0});const P=()=>({url:g.value,method:"POST",fieldName:"files",formFields:[{name:"serviceName",value:t.sName||"fmbb"},{name:"bussinessModule",value:t.bName||"fmbb"},{name:"publicRead",value:!1}]}),M=k=>{i.value=k},I=()=>{a.value=!0},c=()=>{a.value=!1},_=j(0),r=k=>{if(k.xhr.response){const B=JSON.parse(k.xhr.response);je[B.status](B)}},D=()=>{const k=i.value.files;S.value=k.map(B=>B.id).join(","),l("update:modelValue",S.value||"")},F=k=>{if(k.xhr.response){const B=JSON.parse(k.xhr.response);if(B.code!=="0"){for(const ce of k.files)i.value.updateFileStatus(ce,"failed",ce.size),i.value.removeFile(ce);je[B.code](B);return}const H=k.files.length;for(let ce=0;ce<H;ce++)k.files[ce].id=B.data[ce].id;D()}},Q=()=>{s.value=!0},L=(k,B)=>{B>-1&&k.__status!=="uploading"&&(_.value=B,v.value=!0)},R=k=>{a.value=!0,yt({dicUrl:"/oss/api/ossUploadRecord/download",dicQuery:{path:k.resultPath},fileName:k.name,dicMethod:"get",done:()=>{a.value=!1}})},N=(k,B)=>{Yt({msg:`${ee.t("DelTips")}`},()=>{i.value.files.splice(B,1),i.value.removeFile(k),D()},()=>{})};return(k,B)=>(p(),A(ae,null,[y(Oe,Z({hint:e.readonly?"":k.$t("FileTips",[e.isLtXM]),label:void 0,loading:e.loading,readonly:e.readonly,borderless:"",class:"q-picture","lazy-rules":"ondemand","no-error-icon":""},k.$attrs),{control:d(()=>[y(At,Z({factory:P,filter:$},u(m),{onFailed:r,onFinish:c,onStart:I,onUploaded:F}),{header:d(H=>[X(z(M(H))+" ",1),y(mn,{outline:""},{default:d(()=>[y(ie,{disable:!H.files.length,label:k.$t("ToView"),loading:a.value,icon:"preview",outline:"","text-color":"primary",onClick:Q},{default:d(()=>[H.files.length?(p(),U(ot,{key:0,class:pe(`text-${u(o)("info")}`),color:"info",floating:""},{default:d(()=>[X(z(H.files.length),1)]),_:2},1032,["class"])):Y("",!0)]),_:2},1032,["disable","label","loading"]),y(bt,{vertical:""}),y(ie,{disable:e.readonly,label:k.$t("Upload"),loading:a.value,icon:"cloud_upload",outline:"","text-color":"primary",onClick:H.pickFiles},{default:d(()=>[y(Dt)]),_:2},1032,["disable","label","loading","onClick"])]),_:2},1024)]),list:d(()=>[]),_:1},16)]),_:1},16,["hint","loading","readonly"]),y(Zt,{modelValue:s.value,"onUpdate:modelValue":B[0]||(B[0]=H=>s.value=H),header:`${k.$t("File")}${k.$t("List")}`,menuBtn:!1,width:"50%"},{default:d(()=>[y(Xt,{data:(i.value||{}).files,option:u(w)},{__status:d(({row:H})=>[y($l,{value:(H.__progress||1)*100,color:"primary","font-size":"12px","show-value":"",size:"60px"},{default:d(()=>[X(z(H.__progressLabel),1)]),_:2},1032,["value"])]),picture:d(({row:H,index:ce})=>[H.__img?(p(),U(wl,{key:0,src:H.__img.src,class:"rounded-borders cursor-pointer",loading:"lazy",sizes:"60px",onClick:Se($e=>L(H,ce),["stop"])},null,8,["src","onClick"])):Y("",!0)]),menu:d(({row:H,index:ce})=>[y(ie,{loading:a.value,color:"primary",dense:"",flat:"",icon:"cloud_download",round:"",onClick:$e=>R(H)},null,8,["loading","onClick"]),e.readonly?Y("",!0):(p(),U(ie,{key:0,loading:a.value,color:"negative",dense:"",flat:"",icon:"delete",round:"",onClick:$e=>N(H,ce)},null,8,["loading","onClick"]))]),_:1},8,["data","option"])]),_:1},8,["modelValue","header"]),y(Jt,{modelValue:v.value,"onUpdate:modelValue":B[1]||(B[1]=H=>v.value=H),imgList:u(C),index:_.value,keyWords:"__img.src"},null,8,["modelValue","imgList","index"])],64))}};var ao=Object.freeze(Object.defineProperty({__proto__:null,default:no},Symbol.toStringTag,{value:"Module"})),vl={name:"QCodePrism",props:{code:String,lang:String},setup(e){const l=xe("isDark"),t=h(()=>`language-${e.lang} ${l.value?"doc-code-dark":"doc-code"}`);return()=>ge("pre",{class:t.value},[ge("code",{class:t.value,innerHTML:ol.exports.highlight(e.code,ol.exports.languages[e.lang],e.lang)})])}};const hl={"./Global/QFrame.vue":la,"./Global/QJsonTree.vue":aa,"./Global/QModal.vue":oa,"./Global/QxForm.vue":va,"./Global/QxPage.vue":ya,"./Global/QxTable.vue":Ua,"./Global/QxTree.vue":Ra,"./Global/Form/QGroup.vue":Wa,"./Global/Form/QMonth.vue":Ja,"./Global/Form/QNumber.vue":tr,"./Global/Form/QSelectTree.vue":rr,"./Global/Form/QYear.vue":fr,"./Global/Form/QxDate.vue":hr,"./Global/Form/QxEditor.vue":yr,"./Global/Form/QxSelect.vue":xr,"./Global/Form/QxTime.vue":Cr,"./Global/Tools/QCharts.vue":Tr,"./Global/Tools/QExport.vue":Er,"./Global/Tools/QImport.vue":Qr,"./Global/Tools/QPicture.vue":eo,"./Global/Tools/QPreview.vue":Wr,"./Global/Tools/QxBtn.vue":lo,"./Global/Tools/QxFile.vue":ao,"./Global/Tools/QxTooltip.vue":$a},ho=e=>{Object.keys(hl).forEach(l=>{const t=hl[l],n=t.default||t,o=n.name||n.__name;e.component(o,n)}),e.component(vl.name,vl)};export{Ol as _,Ce as a,mo as b,fo as c,Pe as g,ee as i,ho as l,po as r,Re as s,kt as u,vo as z};
